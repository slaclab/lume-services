
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://slaclab.github.io/lume-services/api/tasks/">
      
      
        <link rel="prev" href="../../services/scheduling/">
      
      
        <link rel="next" href="../files/files/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.41">
    
    
      
        <title>Tasks - lume-services</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lume_services.tasks.configure" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="lume-services" class="md-header__button md-logo" aria-label="lume-services" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            lume-services
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tasks
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/slaclab/lume-services" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../model_packaging/" class="md-tabs__link">
        
  
    
  
  Model Packaging

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../services/files/" class="md-tabs__link">
          
  
  Services

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  API

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer/setup/" class="md-tabs__link">
          
  
  Developer

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="lume-services" class="md-nav__button md-logo" aria-label="lume-services" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    lume-services
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/slaclab/lume-services" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Overview
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LUME-Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_packaging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Packaging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Demo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_packaging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Packaging
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Results DB Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/hpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HPC Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modeling Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scheduling Service
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" checked>
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.configure" class="md-nav__link">
    <span class="md-ellipsis">
      configure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.configure.configure_lume_services" class="md-nav__link">
    <span class="md-ellipsis">
      configure_lume_services
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.configure.prepare_lume_model_variables" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_lume_model_variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.db" class="md-nav__link">
    <span class="md-ellipsis">
      db
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.db.LoadDBResult" class="md-nav__link">
    <span class="md-ellipsis">
      LoadDBResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoadDBResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lume_services.tasks.db.LoadDBResult.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lume_services.tasks.db.LoadDBResult.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.db.SaveDBResult" class="md-nav__link">
    <span class="md-ellipsis">
      SaveDBResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SaveDBResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lume_services.tasks.db.SaveDBResult.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lume_services.tasks.db.SaveDBResult.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.file" class="md-nav__link">
    <span class="md-ellipsis">
      file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.file.LoadFile" class="md-nav__link">
    <span class="md-ellipsis">
      LoadFile
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoadFile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lume_services.tasks.file.LoadFile.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lume_services.tasks.file.LoadFile.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lume_services.tasks.file.SaveFile" class="md-nav__link">
    <span class="md-ellipsis">
      SaveFile
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SaveFile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lume_services.tasks.file.SaveFile.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lume_services.tasks.file.SaveFile.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Files
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Files
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../files/files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../files/serializers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serializers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../files/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Results
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10_1" >
        
          
          <label class="md-nav__link" for="__nav_4_10_1" id="__nav_4_10_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Results
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_10_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10_1">
            <span class="md-nav__icon md-icon"></span>
            Results
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/results/results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Results Database Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/results/db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10_2" >
        
          
          <label class="md-nav__link" for="__nav_4_10_2" id="__nav_4_10_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Files
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10_2">
            <span class="md-nav__icon md-icon"></span>
            Files
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/files/files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/files/filesystems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filesystems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10_3" >
        
          
          <label class="md-nav__link" for="__nav_4_10_3" id="__nav_4_10_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10_3">
            <span class="md-nav__icon md-icon"></span>
            Model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/models/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Database Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/models/db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10_4" >
        
          
          <label class="md-nav__link" for="__nav_4_10_4" id="__nav_4_10_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scheduling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10_4">
            <span class="md-nav__icon md-icon"></span>
            Scheduling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/scheduling/scheduling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scheduling Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/scheduling/backends/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backends
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Developer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/todo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TODO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/docker_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker Image
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Tasks</h1>

<div class="doc doc-object doc-module">



<a id="lume_services.tasks.configure"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="lume_services.tasks.configure.configure_lume_services" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">configure_lume_services</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Configure LUME-services using environment variables. This task must be included
in any workflow using common database services.</p>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/configure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;configure_lume_services&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">configure_lume_services</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configure LUME-services using environment variables. This task must be included</span>
<span class="sd">    in any workflow using common database services.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Configuring environment using </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">)))</span>
    <span class="n">config</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="lume_services.tasks.configure.prepare_lume_model_variables" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prepare_lume_model_variables</span><span class="p">(</span><span class="n">value_map</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Utility task for translating parameter values to LUME-model variables.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value_map</code>
            </td>
            <td>
                  <code>Dict[str, Any]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping variable name to value.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variables</code>
            </td>
            <td>
                  <code>Dict[str, Variable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping variable name to LUME-model
variable object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>variables</code></td>            <td>
                  <code>Dict[str, Variable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Formatted LUME-model variables.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variable name passed to value_map is not found in model variables.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/configure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;prepare_lume_model_variables&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">prepare_lume_model_variables</span><span class="p">(</span>
    <span class="n">value_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">variables</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Variable</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Variable</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Utility task for translating parameter values to LUME-model variables.</span>

<span class="sd">    Args:</span>
<span class="sd">        value_map (Dict[str, Any]): Dictionary mapping variable name to value.</span>
<span class="sd">        variables (Dict[str, Variable]): Dictionary mapping variable name to LUME-model</span>
<span class="sd">            variable object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        variables (Dict[str, Variable]): Formatted LUME-model variables.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: Variable name passed to value_map is not found in model variables.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Use deepcopy because don&#39;t want to transform global vars</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">var_name</span> <span class="ow">in</span> <span class="n">value_map</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">var_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Variable name passed to value_map </span><span class="si">%s</span><span class="s2"> not found in model variables. </span><span class="se">\</span>
<span class="s2">                Model variables are </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">var_name</span><span class="p">,</span>
                <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">())),</span>
            <span class="p">)</span>
        <span class="n">variables</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value_map</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span>

    <span class="n">missing_values</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">var_name</span> <span class="k">for</span> <span class="n">var_name</span> <span class="ow">in</span> <span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">var_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">value_map</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_values</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;No value provided for: </span><span class="si">%s</span><span class="s2">. Will assign variable default to value.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">missing_values</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">for</span> <span class="n">var_name</span> <span class="ow">in</span> <span class="n">missing_values</span><span class="p">:</span>
        <span class="n">variables</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">variables</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span><span class="o">.</span><span class="n">default</span>

    <span class="k">return</span> <span class="n">variables</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="lume_services.tasks.db"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="lume_services.tasks.db.LoadDBResult" class="doc doc-heading">
            <code>LoadDBResult</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>Task</code></p>


        <p>Load a result from the results database. All database results generate a
<a class="autorefs autorefs-internal" href="../results/#lume_services.results.generic.Result">minimally representative identifier</a> that can
be used to query the database and load the result. This idenifier is jsonable and
therefore accessable outside of the workflow's scope. This task uses the identifier
to load the database query and performs data selection via the <code>attribute_index</code>
parameters.</p>
<p>The <code>attribute_index</code> parameter provides selection instructions from query. For
example, selecting the first <code>toyota</code> from a dictionary of form: <code>{"outputs":
{"vehicle": {"car":  ["toyota", "mini"], "boat": ["sail", "motor"]}}}</code>would be
accomplished by passing <code>attribute_index=["outputs", "vehicle", "car", 0]</code>.</p>
<p>This task is defined as a subclass of the Prefect <a href="https://docs-v1.prefect.io/api/latest/core/task.html#task-2">Task</a>
object and accepts all Task arguments during initialization.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">task</span>
<span class="kn">from</span> <span class="nn">lume_services.tasks</span> <span class="kn">import</span> <span class="n">configure_lume_services</span><span class="p">,</span> <span class="n">LoadDBResult</span>


<span class="n">load_db_result_task</span> <span class="o">=</span> <span class="n">LoadDBResult</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="nd">@task</span>
<span class="k">def</span> <span class="nf">print_result</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>


<span class="k">with</span> <span class="n">Flow</span><span class="p">(</span>
    <span class="s2">&quot;my_flow&quot;</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">flow</span><span class="p">:</span>
    <span class="c1"># must first configure services because using injected results</span>
    <span class="c1"># database service</span>
    <span class="n">configure_lume_services</span><span class="p">()</span>

    <span class="c1"># assume some other flow has saved a Result object to the database with the</span>
    <span class="c1"># resulting unique representation (Result.unique_rep):</span>
    <span class="n">unique_rep</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;result_type_string&quot;</span><span class="p">:</span> <span class="s2">&quot;lume_services.results.generic:Result&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span>
                   <span class="s2">&quot;input1&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                   <span class="s2">&quot;input2&quot;</span><span class="p">:</span> <span class="mf">2.0</span>
                <span class="p">},</span>
                <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;output1&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                    <span class="s2">&quot;output2&quot;</span><span class="p">:</span> <span class="mf">2.0</span>
                <span class="p">},</span>
               <span class="s2">&quot;flow_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">my_result</span> <span class="o">=</span> <span class="n">load_db_result_task</span><span class="p">(</span>
        <span class="n">result_rep</span> <span class="o">=</span> <span class="n">unique_rep</span><span class="p">,</span>
        <span class="n">attribute_index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">,</span> <span class="s2">&quot;output1&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">print_result</span><span class="p">(</span><span class="n">my_result</span><span class="p">)</span> <span class="c1"># Will print 1.0</span>
</code></pre></div>






              <details class="quote">
                <summary>Source code in <code>lume_services/tasks/db.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LoadDBResult</span><span class="p">(</span><span class="n">Task</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a result from the results database. All database results generate a</span>
<span class="sd">    [minimally representative identifier][lume_services.results.generic.Result] that can</span>
<span class="sd">    be used to query the database and load the result. This idenifier is jsonable and</span>
<span class="sd">    therefore accessable outside of the workflow&#39;s scope. This task uses the identifier</span>
<span class="sd">    to load the database query and performs data selection via the `attribute_index`</span>
<span class="sd">    parameters.</span>

<span class="sd">    The `attribute_index` parameter provides selection instructions from query. For</span>
<span class="sd">    example, selecting the first `toyota` from a dictionary of form: `{&quot;outputs&quot;:</span>
<span class="sd">    {&quot;vehicle&quot;: {&quot;car&quot;:  [&quot;toyota&quot;, &quot;mini&quot;], &quot;boat&quot;: [&quot;sail&quot;, &quot;motor&quot;]}}}`would be</span>
<span class="sd">    accomplished by passing `attribute_index=[&quot;outputs&quot;, &quot;vehicle&quot;, &quot;car&quot;, 0]`.</span>

<span class="sd">    This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">    object and accepts all Task arguments during initialization.</span>

<span class="sd">    Examples:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import Flow, task</span>
<span class="sd">        from lume_services.tasks import configure_lume_services, LoadDBResult</span>


<span class="sd">        load_db_result_task = LoadDBResult(timeout=20)</span>

<span class="sd">        @task</span>
<span class="sd">        def print_result(value):</span>
<span class="sd">            print(value)</span>


<span class="sd">        with Flow(</span>
<span class="sd">            &quot;my_flow&quot;</span>
<span class="sd">        ) as flow:</span>
<span class="sd">            # must first configure services because using injected results</span>
<span class="sd">            # database service</span>
<span class="sd">            configure_lume_services()</span>

<span class="sd">            # assume some other flow has saved a Result object to the database with the</span>
<span class="sd">            # resulting unique representation (Result.unique_rep):</span>
<span class="sd">            unique_rep = {</span>
<span class="sd">                &quot;result_type_string&quot;: &quot;lume_services.results.generic:Result&quot;,</span>
<span class="sd">                &quot;query&quot;: {</span>
<span class="sd">                       &quot;inputs&quot;: {</span>
<span class="sd">                           &quot;input1&quot;: 1.0,</span>
<span class="sd">                           &quot;input2&quot;: 2.0</span>
<span class="sd">                        },</span>
<span class="sd">                        &quot;outputs&quot;: {</span>
<span class="sd">                            &quot;output1&quot;: 1.0,</span>
<span class="sd">                            &quot;output2&quot;: 2.0</span>
<span class="sd">                        },</span>
<span class="sd">                       &quot;flow_id&quot;: 1</span>
<span class="sd">                }</span>
<span class="sd">            }</span>

<span class="sd">            my_result = load_db_result_task(</span>
<span class="sd">                result_rep = unique_rep,</span>
<span class="sd">                attribute_index=[&quot;outputs&quot;, &quot;output1&quot;]</span>
<span class="sd">            )</span>

<span class="sd">            print_result(my_result) # Will print 1.0</span>
<span class="sd">        ```</span>

<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;attribute_index&quot;</span><span class="p">:</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;attribute_index&quot;</span><span class="p">),</span>
        <span class="s2">&quot;result_rep&quot;</span><span class="p">:</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;result_rep&quot;</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">        object and accepts all Task arguments during initialization.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (Optional[str]): The name of this task.</span>
<span class="sd">            slug (Optional[str]):  The slug for this task. Slugs provide a stable ID</span>
<span class="sd">                for tasks so that the Prefect API can identify task run states. If a</span>
<span class="sd">                slug is not provided, one will be generated automatically once the</span>
<span class="sd">                task is added to a Flow.</span>
<span class="sd">            tags (Optional[List[str]]): A list of tags for this task.</span>
<span class="sd">            max_retries (Optional[int]): The maximum amount of times this task can be</span>
<span class="sd">                retried</span>
<span class="sd">            retry_delay (Optional[datetime.timedelta]): The amount of time to wait</span>
<span class="sd">                until task is retried</span>
<span class="sd">            retry_on (Optional[Union[Exception, Iterable[Type[Exception]]]]): Exception</span>
<span class="sd">                types that will allow retry behavior to occur. If not set, all</span>
<span class="sd">                exceptions will allow retries. If set, retries will only occur if the</span>
<span class="sd">                exception is a subtype of the exception types provided.</span>
<span class="sd">            timeout (Optional[Union[int, timedelta]]): The amount of time (in seconds)</span>
<span class="sd">                to wait while running this task before a timeout occurs; note that</span>
<span class="sd">                sub-second resolution is not supported, even when passing in a</span>
<span class="sd">                timedelta.</span>
<span class="sd">            trigger (Optional[callable]):  a function that determines whether the task</span>
<span class="sd">                should run, based on the states of any upstream tasks.</span>
<span class="sd">            skip_on_upstream_skip (Optional[bool]): if True, if any immediately upstream</span>
<span class="sd">                tasks are skipped, this task will automatically be skipped as well,</span>
<span class="sd">                regardless of trigger. By default, this prevents tasks from attempting</span>
<span class="sd">                to use either state or data from tasks that didn&#39;t run. If False, the</span>
<span class="sd">                task&#39;s trigger will be called as normal, with skips considered</span>
<span class="sd">                successes. Defaults to True.</span>
<span class="sd">            cache_for (Optional[timedelta]): The amount of time to maintain a cache</span>
<span class="sd">            of the outputs of this task.  Useful for situations where the containing</span>
<span class="sd">            Flow will be rerun multiple times, but this task doesn&#39;t need to be.</span>
<span class="sd">            cache_validator (Optional[Callable]): Validator that will determine</span>
<span class="sd">                whether the cache for this task is still valid (only required if</span>
<span class="sd">                `cache_for` is provided; defaults to</span>
<span class="sd">                `prefect.engine.cache_validators.duration_only`)</span>
<span class="sd">            cache_key (Optional[str]): if provided, a `cache_key`</span>
<span class="sd">                serves as a unique identifier for this Task&#39;s cache, and can be shared</span>
<span class="sd">                across both Tasks _and_ Flows; if not provided, the Task&#39;s _name_ will</span>
<span class="sd">                be used if running locally, or the Task&#39;s database ID if running in</span>
<span class="sd">                Cloud</span>
<span class="sd">            checkpoint (Optional[bool]): if this Task is successful, whether to</span>
<span class="sd">                store its result using the configured result available during the run;</span>
<span class="sd">                Also note that checkpointing will only occur locally if</span>
<span class="sd">                `prefect.config.flows.checkpointing` is set to `True`</span>
<span class="sd">            result (Optional[Result]): the result instance used to retrieve and</span>
<span class="sd">                store task results during execution</span>
<span class="sd">            target (Optional[Union[str, Callable]]): location to check for task Result.</span>
<span class="sd">                If a result exists at that location then the task run will enter a</span>
<span class="sd">                cached state. `target` strings can be templated formatting strings</span>
<span class="sd">                which will be formatted at runtime with values from `prefect.context`.</span>
<span class="sd">                If a callable function is provided, it should have signature</span>
<span class="sd">                `callable(**kwargs) -&gt; str` and at write time all formatting kwargs</span>
<span class="sd">                will be passed and a fully formatted location is expected as the return</span>
<span class="sd">                value. The callable can be used for string formatting logic that</span>
<span class="sd">                `.format(**kwargs)` doesn&#39;t support.</span>
<span class="sd">            state_handlers (Optional[Iterable[Callable]]): A list of state change</span>
<span class="sd">                handlers that will be called whenever the task changes state,</span>
<span class="sd">                providing an opportunity to inspect or modify the new state. The</span>
<span class="sd">                handler will be passed the task instance, the old (prior) state,</span>
<span class="sd">                and the new</span>
<span class="sd">                (current) state, with the following signature:</span>
<span class="sd">                    `state_handler(task: Task, old_state: State, new_state: State) -&gt;</span>
<span class="sd">                    Optional[State]`</span>
<span class="sd">                If multiple functions are passed, then the `new_state` argument will</span>
<span class="sd">                be the result of the previous handler.</span>
<span class="sd">            on_failure (Optional[Callable]): A function with signature</span>
<span class="sd">                `fn(task: Task, state: State) -&gt; None` that will be called anytime this</span>
<span class="sd">                Task enters a failure state</span>
<span class="sd">            log_stdout (Optional[bool]): Toggle whether or not to send stdout messages</span>
<span class="sd">                to the Prefect logger. Defaults to `False`.</span>
<span class="sd">            task_run_name (Optional[Union[str, Callable]]): a name to set for this task</span>
<span class="sd">                at runtime. `task_run_name` strings can be templated formatting strings</span>
<span class="sd">                which will be formatted at runtime with values from task arguments,</span>
<span class="sd">                `prefect.context`, and flow parameters (in the case of a name conflict</span>
<span class="sd">                between these, earlier values take precedence). If a callable function</span>
<span class="sd">                is provided, it should have signature `callable(**kwargs) -&gt; str` and</span>
<span class="sd">                at write time all formatting kwargs will be passed and a fully</span>
<span class="sd">                formatted location is expected as the return value. The callable can</span>
<span class="sd">                be used for string formatting logic that `.format(**kwargs)` doesn&#39;t</span>
<span class="sd">                support. **Note**: this only works for tasks running against a</span>
<span class="sd">                backend API.</span>
<span class="sd">            nout (Optional[int]): for tasks that return multiple results, the number of</span>
<span class="sd">                outputs to expect. If not provided, will be inferred from the task</span>
<span class="sd">                return annotation, if possible.  Note that `nout=1` implies the task</span>
<span class="sd">                returns a tuple of one value (leave as `None` for non-tuple return</span>
<span class="sd">                types).</span>

<span class="sd">        &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

        <span class="c1"># apply some defaults but allow overrides</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">):</span>
            <span class="n">log_stdout</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;load_db_result&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="n">log_stdout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">result_rep</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">attribute_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">],</span>
        <span class="n">results_db_service</span><span class="p">:</span> <span class="n">ResultsDB</span> <span class="o">=</span> <span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">results_db_service</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a result from the database using a lume_services.Result represention.</span>

<span class="sd">        Args:</span>
<span class="sd">            result_rep (Union[dict, str]): Result representation containing</span>
<span class="sd">                result_type_string and query for selection. If string passed,</span>
<span class="sd">                will perform json loads to get dictionary.</span>
<span class="sd">            attribute_index (Optional[list]): Selection instructions from query.</span>
<span class="sd">                For example, selecting the first `toyota` from a dictionary of form:</span>
<span class="sd">                `{&quot;vehicle&quot;: {&quot;car&quot;:  [&quot;toyota&quot;, &quot;mini&quot;], &quot;boat&quot;: [&quot;sail&quot;, &quot;motor&quot;]}}`</span>
<span class="sd">                would be accomplished by passing `attribute_index=[&quot;car&quot;, 0].</span>
<span class="sd">            results_db_service (ResultsDB): Results database service. This is injected</span>
<span class="sd">                when using the LUME-service configuration toolset.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: Returns selection of value from result if attibute_index is passed,</span>
<span class="sd">                otherwise returns Result object.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result_type</span> <span class="o">=</span> <span class="n">get_result_from_string</span><span class="p">(</span><span class="n">result_rep</span><span class="p">[</span><span class="s2">&quot;result_type_string&quot;</span><span class="p">])</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result_type</span><span class="o">.</span><span class="n">load_from_query</span><span class="p">(</span>
            <span class="n">result_rep</span><span class="p">[</span><span class="s2">&quot;project_name&quot;</span><span class="p">],</span>
            <span class="n">result_rep</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">],</span>
            <span class="n">results_db_service</span><span class="o">=</span><span class="n">results_db_service</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># select first attribute</span>
        <span class="n">attr_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">attribute_index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">attr_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">attribute_index</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="n">attr_value</span> <span class="o">=</span> <span class="n">attr_value</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

            <span class="k">return</span> <span class="n">attr_value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="lume_services.tasks.db.LoadDBResult.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>This task is defined as a subclass of the Prefect <a href="https://docs-v1.prefect.io/api/latest/core/task.html#task-2">Task</a>
object and accepts all Task arguments during initialization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of this task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>slug</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The slug for this task. Slugs provide a stable ID
for tasks so that the Prefect API can identify task run states. If a
slug is not provided, one will be generated automatically once the
task is added to a Flow.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tags</code>
            </td>
            <td>
                  <code>Optional[List[str]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tags for this task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_retries</code>
            </td>
            <td>
                  <code>Optional[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum amount of times this task can be
retried</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>retry_delay</code>
            </td>
            <td>
                  <code>Optional[timedelta]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time to wait
until task is retried</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>retry_on</code>
            </td>
            <td>
                  <code>Optional[Union[Exception, Iterable[Type[Exception]]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception
types that will allow retry behavior to occur. If not set, all
exceptions will allow retries. If set, retries will only occur if the
exception is a subtype of the exception types provided.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code>Optional[Union[int, timedelta]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time (in seconds)
to wait while running this task before a timeout occurs; note that
sub-second resolution is not supported, even when passing in a
timedelta.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trigger</code>
            </td>
            <td>
                  <code>Optional[callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a function that determines whether the task
should run, based on the states of any upstream tasks.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skip_on_upstream_skip</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, if any immediately upstream
tasks are skipped, this task will automatically be skipped as well,
regardless of trigger. By default, this prevents tasks from attempting
to use either state or data from tasks that didn't run. If False, the
task's trigger will be called as normal, with skips considered
successes. Defaults to True.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_for</code>
            </td>
            <td>
                  <code>Optional[timedelta]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time to maintain a cache</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_validator</code>
            </td>
            <td>
                  <code>Optional[Callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Validator that will determine
whether the cache for this task is still valid (only required if
<code>cache_for</code> is provided; defaults to
<code>prefect.engine.cache_validators.duration_only</code>)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_key</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if provided, a <code>cache_key</code>
serves as a unique identifier for this Task's cache, and can be shared
across both Tasks <em>and</em> Flows; if not provided, the Task's <em>name</em> will
be used if running locally, or the Task's database ID if running in
Cloud</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>checkpoint</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if this Task is successful, whether to
store its result using the configured result available during the run;
Also note that checkpointing will only occur locally if
<code>prefect.config.flows.checkpointing</code> is set to <code>True</code></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>result</code>
            </td>
            <td>
                  <code>Optional[Result]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the result instance used to retrieve and
store task results during execution</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target</code>
            </td>
            <td>
                  <code>Optional[Union[str, Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>location to check for task Result.
If a result exists at that location then the task run will enter a
cached state. <code>target</code> strings can be templated formatting strings
which will be formatted at runtime with values from <code>prefect.context</code>.
If a callable function is provided, it should have signature
<code>callable(**kwargs) -&gt; str</code> and at write time all formatting kwargs
will be passed and a fully formatted location is expected as the return
value. The callable can be used for string formatting logic that
<code>.format(**kwargs)</code> doesn't support.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>state_handlers</code>
            </td>
            <td>
                  <code>Optional[Iterable[Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of state change
handlers that will be called whenever the task changes state,
providing an opportunity to inspect or modify the new state. The
handler will be passed the task instance, the old (prior) state,
and the new
(current) state, with the following signature:
    <code>state_handler(task: Task, old_state: State, new_state: State) -&gt;
    Optional[State]</code>
If multiple functions are passed, then the <code>new_state</code> argument will
be the result of the previous handler.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_failure</code>
            </td>
            <td>
                  <code>Optional[Callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function with signature
<code>fn(task: Task, state: State) -&gt; None</code> that will be called anytime this
Task enters a failure state</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_stdout</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Toggle whether or not to send stdout messages
to the Prefect logger. Defaults to <code>False</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_run_name</code>
            </td>
            <td>
                  <code>Optional[Union[str, Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a name to set for this task
at runtime. <code>task_run_name</code> strings can be templated formatting strings
which will be formatted at runtime with values from task arguments,
<code>prefect.context</code>, and flow parameters (in the case of a name conflict
between these, earlier values take precedence). If a callable function
is provided, it should have signature <code>callable(**kwargs) -&gt; str</code> and
at write time all formatting kwargs will be passed and a fully
formatted location is expected as the return value. The callable can
be used for string formatting logic that <code>.format(**kwargs)</code> doesn't
support. <strong>Note</strong>: this only works for tasks running against a
backend API.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nout</code>
            </td>
            <td>
                  <code>Optional[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>for tasks that return multiple results, the number of
outputs to expect. If not provided, will be inferred from the task
return annotation, if possible.  Note that <code>nout=1</code> implies the task
returns a tuple of one value (leave as <code>None</code> for non-tuple return
types).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/db.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">    object and accepts all Task arguments during initialization.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (Optional[str]): The name of this task.</span>
<span class="sd">        slug (Optional[str]):  The slug for this task. Slugs provide a stable ID</span>
<span class="sd">            for tasks so that the Prefect API can identify task run states. If a</span>
<span class="sd">            slug is not provided, one will be generated automatically once the</span>
<span class="sd">            task is added to a Flow.</span>
<span class="sd">        tags (Optional[List[str]]): A list of tags for this task.</span>
<span class="sd">        max_retries (Optional[int]): The maximum amount of times this task can be</span>
<span class="sd">            retried</span>
<span class="sd">        retry_delay (Optional[datetime.timedelta]): The amount of time to wait</span>
<span class="sd">            until task is retried</span>
<span class="sd">        retry_on (Optional[Union[Exception, Iterable[Type[Exception]]]]): Exception</span>
<span class="sd">            types that will allow retry behavior to occur. If not set, all</span>
<span class="sd">            exceptions will allow retries. If set, retries will only occur if the</span>
<span class="sd">            exception is a subtype of the exception types provided.</span>
<span class="sd">        timeout (Optional[Union[int, timedelta]]): The amount of time (in seconds)</span>
<span class="sd">            to wait while running this task before a timeout occurs; note that</span>
<span class="sd">            sub-second resolution is not supported, even when passing in a</span>
<span class="sd">            timedelta.</span>
<span class="sd">        trigger (Optional[callable]):  a function that determines whether the task</span>
<span class="sd">            should run, based on the states of any upstream tasks.</span>
<span class="sd">        skip_on_upstream_skip (Optional[bool]): if True, if any immediately upstream</span>
<span class="sd">            tasks are skipped, this task will automatically be skipped as well,</span>
<span class="sd">            regardless of trigger. By default, this prevents tasks from attempting</span>
<span class="sd">            to use either state or data from tasks that didn&#39;t run. If False, the</span>
<span class="sd">            task&#39;s trigger will be called as normal, with skips considered</span>
<span class="sd">            successes. Defaults to True.</span>
<span class="sd">        cache_for (Optional[timedelta]): The amount of time to maintain a cache</span>
<span class="sd">        of the outputs of this task.  Useful for situations where the containing</span>
<span class="sd">        Flow will be rerun multiple times, but this task doesn&#39;t need to be.</span>
<span class="sd">        cache_validator (Optional[Callable]): Validator that will determine</span>
<span class="sd">            whether the cache for this task is still valid (only required if</span>
<span class="sd">            `cache_for` is provided; defaults to</span>
<span class="sd">            `prefect.engine.cache_validators.duration_only`)</span>
<span class="sd">        cache_key (Optional[str]): if provided, a `cache_key`</span>
<span class="sd">            serves as a unique identifier for this Task&#39;s cache, and can be shared</span>
<span class="sd">            across both Tasks _and_ Flows; if not provided, the Task&#39;s _name_ will</span>
<span class="sd">            be used if running locally, or the Task&#39;s database ID if running in</span>
<span class="sd">            Cloud</span>
<span class="sd">        checkpoint (Optional[bool]): if this Task is successful, whether to</span>
<span class="sd">            store its result using the configured result available during the run;</span>
<span class="sd">            Also note that checkpointing will only occur locally if</span>
<span class="sd">            `prefect.config.flows.checkpointing` is set to `True`</span>
<span class="sd">        result (Optional[Result]): the result instance used to retrieve and</span>
<span class="sd">            store task results during execution</span>
<span class="sd">        target (Optional[Union[str, Callable]]): location to check for task Result.</span>
<span class="sd">            If a result exists at that location then the task run will enter a</span>
<span class="sd">            cached state. `target` strings can be templated formatting strings</span>
<span class="sd">            which will be formatted at runtime with values from `prefect.context`.</span>
<span class="sd">            If a callable function is provided, it should have signature</span>
<span class="sd">            `callable(**kwargs) -&gt; str` and at write time all formatting kwargs</span>
<span class="sd">            will be passed and a fully formatted location is expected as the return</span>
<span class="sd">            value. The callable can be used for string formatting logic that</span>
<span class="sd">            `.format(**kwargs)` doesn&#39;t support.</span>
<span class="sd">        state_handlers (Optional[Iterable[Callable]]): A list of state change</span>
<span class="sd">            handlers that will be called whenever the task changes state,</span>
<span class="sd">            providing an opportunity to inspect or modify the new state. The</span>
<span class="sd">            handler will be passed the task instance, the old (prior) state,</span>
<span class="sd">            and the new</span>
<span class="sd">            (current) state, with the following signature:</span>
<span class="sd">                `state_handler(task: Task, old_state: State, new_state: State) -&gt;</span>
<span class="sd">                Optional[State]`</span>
<span class="sd">            If multiple functions are passed, then the `new_state` argument will</span>
<span class="sd">            be the result of the previous handler.</span>
<span class="sd">        on_failure (Optional[Callable]): A function with signature</span>
<span class="sd">            `fn(task: Task, state: State) -&gt; None` that will be called anytime this</span>
<span class="sd">            Task enters a failure state</span>
<span class="sd">        log_stdout (Optional[bool]): Toggle whether or not to send stdout messages</span>
<span class="sd">            to the Prefect logger. Defaults to `False`.</span>
<span class="sd">        task_run_name (Optional[Union[str, Callable]]): a name to set for this task</span>
<span class="sd">            at runtime. `task_run_name` strings can be templated formatting strings</span>
<span class="sd">            which will be formatted at runtime with values from task arguments,</span>
<span class="sd">            `prefect.context`, and flow parameters (in the case of a name conflict</span>
<span class="sd">            between these, earlier values take precedence). If a callable function</span>
<span class="sd">            is provided, it should have signature `callable(**kwargs) -&gt; str` and</span>
<span class="sd">            at write time all formatting kwargs will be passed and a fully</span>
<span class="sd">            formatted location is expected as the return value. The callable can</span>
<span class="sd">            be used for string formatting logic that `.format(**kwargs)` doesn&#39;t</span>
<span class="sd">            support. **Note**: this only works for tasks running against a</span>
<span class="sd">            backend API.</span>
<span class="sd">        nout (Optional[int]): for tasks that return multiple results, the number of</span>
<span class="sd">            outputs to expect. If not provided, will be inferred from the task</span>
<span class="sd">            return annotation, if possible.  Note that `nout=1` implies the task</span>
<span class="sd">            returns a tuple of one value (leave as `None` for non-tuple return</span>
<span class="sd">            types).</span>

<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

    <span class="c1"># apply some defaults but allow overrides</span>
    <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">):</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;load_db_result&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="n">log_stdout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="lume_services.tasks.db.LoadDBResult.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">result_rep</span><span class="p">,</span> <span class="n">attribute_index</span><span class="p">,</span> <span class="n">results_db_service</span><span class="o">=</span><span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">results_db_service</span><span class="p">])</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Load a result from the database using a lume_services.Result represention.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>result_rep</code>
            </td>
            <td>
                  <code>Union[dict, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Result representation containing
result_type_string and query for selection. If string passed,
will perform json loads to get dictionary.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribute_index</code>
            </td>
            <td>
                  <code>Optional[list]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Selection instructions from query.
For example, selecting the first <code>toyota</code> from a dictionary of form:
<code>{"vehicle": {"car":  ["toyota", "mini"], "boat": ["sail", "motor"]}}</code>
would be accomplished by passing `attribute_index=["car", 0].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>results_db_service</code>
            </td>
            <td>
                  <code>ResultsDB</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Results database service. This is injected
when using the LUME-service configuration toolset.</p>
              </div>
            </td>
            <td>
                  <code>Provide[results_db_service]</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code>Any</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Returns selection of value from result if attibute_index is passed,
otherwise returns Result object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/db.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">result_rep</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">attribute_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">],</span>
    <span class="n">results_db_service</span><span class="p">:</span> <span class="n">ResultsDB</span> <span class="o">=</span> <span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">results_db_service</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a result from the database using a lume_services.Result represention.</span>

<span class="sd">    Args:</span>
<span class="sd">        result_rep (Union[dict, str]): Result representation containing</span>
<span class="sd">            result_type_string and query for selection. If string passed,</span>
<span class="sd">            will perform json loads to get dictionary.</span>
<span class="sd">        attribute_index (Optional[list]): Selection instructions from query.</span>
<span class="sd">            For example, selecting the first `toyota` from a dictionary of form:</span>
<span class="sd">            `{&quot;vehicle&quot;: {&quot;car&quot;:  [&quot;toyota&quot;, &quot;mini&quot;], &quot;boat&quot;: [&quot;sail&quot;, &quot;motor&quot;]}}`</span>
<span class="sd">            would be accomplished by passing `attribute_index=[&quot;car&quot;, 0].</span>
<span class="sd">        results_db_service (ResultsDB): Results database service. This is injected</span>
<span class="sd">            when using the LUME-service configuration toolset.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: Returns selection of value from result if attibute_index is passed,</span>
<span class="sd">            otherwise returns Result object.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result_type</span> <span class="o">=</span> <span class="n">get_result_from_string</span><span class="p">(</span><span class="n">result_rep</span><span class="p">[</span><span class="s2">&quot;result_type_string&quot;</span><span class="p">])</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">result_type</span><span class="o">.</span><span class="n">load_from_query</span><span class="p">(</span>
        <span class="n">result_rep</span><span class="p">[</span><span class="s2">&quot;project_name&quot;</span><span class="p">],</span>
        <span class="n">result_rep</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">],</span>
        <span class="n">results_db_service</span><span class="o">=</span><span class="n">results_db_service</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># select first attribute</span>
    <span class="n">attr_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">attribute_index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">attr_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">attribute_index</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">attr_value</span> <span class="o">=</span> <span class="n">attr_value</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">attr_value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="lume_services.tasks.db.SaveDBResult" class="doc doc-heading">
            <code>SaveDBResult</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>Task</code></p>


        <p>Save a result from the results database. All database results generate a
<a class="autorefs autorefs-internal" href="../results/#lume_services.results.generic.Result">minimally representative identifier</a> that can
be used to query the database and load the result. This idenifier is jsonable and
therefore accessable outside of the workflow's scope. This task uses either a
passed or injected results database service to save the unique representation
of the result to the database. Custom result sublasses may impose additional
uniqueness constraints. In order to use this task with the backend, your
flow must be registered with the backend as the result's <code>flow_id</code> is inferred from
the Prefect Context. Alternatively, for development purposes, <code>flow_id</code> can be
passed directly.</p>
<p>This task is defined as a subclass of the Prefect <a href="https://docs-v1.prefect.io/api/latest/core/task.html#task-2">Task</a>
object and accepts all Task arguments during initialization.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">task</span>
<span class="kn">from</span> <span class="nn">lume_services.results</span> <span class="kn">import</span> <span class="n">Result</span>
<span class="kn">from</span> <span class="nn">lume_services.tasks</span> <span class="kn">import</span> <span class="n">configure_lume_services</span><span class="p">,</span> <span class="n">SaveDBResult</span>

<span class="c1"># construct_task</span>
<span class="n">save_db_result_task</span> <span class="o">=</span> <span class="n">SaveDBResult</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="nd">@task</span>
<span class="k">def</span> <span class="nf">format_result_entry</span><span class="p">():</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;input1&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;input2&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">outputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;output1&quot;</span> <span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;output2&quot;</span><span class="p">:</span> <span class="mf">2.0</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">Result</span><span class="p">(</span>
        <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
        <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span>
        <span class="n">flow_id</span><span class="o">=</span><span class="s2">&quot;local-test&quot;</span>
    <span class="p">)</span>

<span class="k">with</span> <span class="n">Flow</span><span class="p">(</span>
    <span class="s2">&quot;my_flow&quot;</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">flow</span><span class="p">:</span>
    <span class="c1"># must first configure services because using injected results</span>
    <span class="c1"># database service</span>
    <span class="n">configure_lume_services</span><span class="p">()</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">format_result_entry</span><span class="p">()</span>

    <span class="n">my_result</span> <span class="o">=</span> <span class="n">save_db_result_task</span><span class="p">(</span>
        <span class="n">result</span>
    <span class="p">)</span>
</code></pre></div>






              <details class="quote">
                <summary>Source code in <code>lume_services/tasks/db.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SaveDBResult</span><span class="p">(</span><span class="n">Task</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save a result from the results database. All database results generate a</span>
<span class="sd">    [minimally representative identifier][lume_services.results.generic.Result] that can</span>
<span class="sd">    be used to query the database and load the result. This idenifier is jsonable and</span>
<span class="sd">    therefore accessable outside of the workflow&#39;s scope. This task uses either a</span>
<span class="sd">    passed or injected results database service to save the unique representation</span>
<span class="sd">    of the result to the database. Custom result sublasses may impose additional</span>
<span class="sd">    uniqueness constraints. In order to use this task with the backend, your</span>
<span class="sd">    flow must be registered with the backend as the result&#39;s `flow_id` is inferred from</span>
<span class="sd">    the Prefect Context. Alternatively, for development purposes, `flow_id` can be</span>
<span class="sd">    passed directly.</span>

<span class="sd">    This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">    object and accepts all Task arguments during initialization.</span>

<span class="sd">    Examples:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import Flow, task</span>
<span class="sd">        from lume_services.results import Result</span>
<span class="sd">        from lume_services.tasks import configure_lume_services, SaveDBResult</span>

<span class="sd">        # construct_task</span>
<span class="sd">        save_db_result_task = SaveDBResult(timeout=20)</span>

<span class="sd">        @task</span>
<span class="sd">        def format_result_entry():</span>
<span class="sd">            inputs = {</span>
<span class="sd">                &quot;input1&quot;: 1.0,</span>
<span class="sd">                &quot;input2&quot;: 2.0,</span>
<span class="sd">            }</span>

<span class="sd">            outputs = {</span>
<span class="sd">                &quot;output1&quot; : 1.0,</span>
<span class="sd">                &quot;output2&quot;: 2.0</span>
<span class="sd">            }</span>

<span class="sd">            return Result(</span>
<span class="sd">                inputs=inputs,</span>
<span class="sd">                outputs=outputs,</span>
<span class="sd">                flow_id=&quot;local-test&quot;</span>
<span class="sd">            )</span>

<span class="sd">        with Flow(</span>
<span class="sd">            &quot;my_flow&quot;</span>
<span class="sd">        ) as flow:</span>
<span class="sd">            # must first configure services because using injected results</span>
<span class="sd">            # database service</span>
<span class="sd">            configure_lume_services()</span>

<span class="sd">            result = format_result_entry()</span>

<span class="sd">            my_result = save_db_result_task(</span>
<span class="sd">                result</span>
<span class="sd">            )</span>

<span class="sd">        ```</span>

<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">        object and accepts all Task arguments during initialization.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (Optional[str]): The name of this task.</span>
<span class="sd">            slug (Optional[str]):  The slug for this task. Slugs provide a stable ID</span>
<span class="sd">                for tasks so that the Prefect API can identify task run states. If a</span>
<span class="sd">                slug is not provided, one will be generated automatically once the</span>
<span class="sd">                task is added to a Flow.</span>
<span class="sd">            tags (Optional[List[str]]): A list of tags for this task.</span>
<span class="sd">            max_retries (Optional[int]): The maximum amount of times this task can be</span>
<span class="sd">                retried</span>
<span class="sd">            retry_delay (Optional[datetime.timedelta]): The amount of time to wait</span>
<span class="sd">                until task is retried</span>
<span class="sd">            retry_on (Optional[Union[Exception, Iterable[Type[Exception]]]]): Exception</span>
<span class="sd">                types that will allow retry behavior to occur. If not set, all</span>
<span class="sd">                exceptions will allow retries. If set, retries will only occur if the</span>
<span class="sd">                exception is a subtype of the exception types provided.</span>
<span class="sd">            timeout (Optional[Union[int, timedelta]]): The amount of time (in seconds)</span>
<span class="sd">                to wait while running this task before a timeout occurs; note that</span>
<span class="sd">                sub-second resolution is not supported, even when passing in a</span>
<span class="sd">                timedelta.</span>
<span class="sd">            trigger (Optional[callable]):  a function that determines whether the task</span>
<span class="sd">                should run, based on the states of any upstream tasks.</span>
<span class="sd">            skip_on_upstream_skip (Optional[bool]): if True, if any immediately upstream</span>
<span class="sd">                tasks are skipped, this task will automatically be skipped as well,</span>
<span class="sd">                regardless of trigger. By default, this prevents tasks from attempting</span>
<span class="sd">                to use either state or data from tasks that didn&#39;t run. If False, the</span>
<span class="sd">                task&#39;s trigger will be called as normal, with skips considered</span>
<span class="sd">                successes. Defaults to True.</span>
<span class="sd">            cache_for (Optional[timedelta]): The amount of time to maintain a cache</span>
<span class="sd">            of the outputs of this task.  Useful for situations where the containing</span>
<span class="sd">            Flow will be rerun multiple times, but this task doesn&#39;t need to be.</span>
<span class="sd">            cache_validator (Optional[Callable]): Validator that will determine</span>
<span class="sd">                whether the cache for this task is still valid (only required if</span>
<span class="sd">                `cache_for` is provided; defaults to</span>
<span class="sd">                `prefect.engine.cache_validators.duration_only`)</span>
<span class="sd">            cache_key (Optional[str]): if provided, a `cache_key`</span>
<span class="sd">                serves as a unique identifier for this Task&#39;s cache, and can be shared</span>
<span class="sd">                across both Tasks _and_ Flows; if not provided, the Task&#39;s _name_ will</span>
<span class="sd">                be used if running locally, or the Task&#39;s database ID if running in</span>
<span class="sd">                Cloud</span>
<span class="sd">            checkpoint (Optional[bool]): if this Task is successful, whether to</span>
<span class="sd">                store its result using the configured result available during the run;</span>
<span class="sd">                Also note that checkpointing will only occur locally if</span>
<span class="sd">                `prefect.config.flows.checkpointing` is set to `True`</span>
<span class="sd">            result (Optional[Result]): the result instance used to retrieve and</span>
<span class="sd">                store task results during execution</span>
<span class="sd">            target (Optional[Union[str, Callable]]): location to check for task Result.</span>
<span class="sd">                If a result exists at that location then the task run will enter a</span>
<span class="sd">                cached state. `target` strings can be templated formatting strings</span>
<span class="sd">                which will be formatted at runtime with values from `prefect.context`.</span>
<span class="sd">                If a callable function is provided, it should have signature</span>
<span class="sd">                `callable(**kwargs) -&gt; str` and at write time all formatting kwargs</span>
<span class="sd">                will be passed and a fully formatted location is expected as the return</span>
<span class="sd">                value. The callable can be used for string formatting logic that</span>
<span class="sd">                `.format(**kwargs)` doesn&#39;t support.</span>
<span class="sd">            state_handlers (Optional[Iterable[Callable]]): A list of state change</span>
<span class="sd">                handlers that will be called whenever the task changes state,</span>
<span class="sd">                providing an opportunity to inspect or modify the new state. The</span>
<span class="sd">                handler will be passed the task instance, the old (prior) state,</span>
<span class="sd">                and the new</span>
<span class="sd">                (current) state, with the following signature:</span>
<span class="sd">                    `state_handler(task: Task, old_state: State, new_state: State) -&gt;</span>
<span class="sd">                    Optional[State]`</span>
<span class="sd">                If multiple functions are passed, then the `new_state` argument will</span>
<span class="sd">                be the result of the previous handler.</span>
<span class="sd">            on_failure (Optional[Callable]): A function with signature</span>
<span class="sd">                `fn(task: Task, state: State) -&gt; None` that will be called anytime this</span>
<span class="sd">                Task enters a failure state</span>
<span class="sd">            log_stdout (Optional[bool]): Toggle whether or not to send stdout messages</span>
<span class="sd">                to the Prefect logger. Defaults to `False`.</span>
<span class="sd">            task_run_name (Optional[Union[str, Callable]]): a name to set for this task</span>
<span class="sd">                at runtime. `task_run_name` strings can be templated formatting strings</span>
<span class="sd">                which will be formatted at runtime with values from task arguments,</span>
<span class="sd">                `prefect.context`, and flow parameters (in the case of a name conflict</span>
<span class="sd">                between these, earlier values take precedence). If a callable function</span>
<span class="sd">                is provided, it should have signature `callable(**kwargs) -&gt; str` and</span>
<span class="sd">                at write time all formatting kwargs will be passed and a fully</span>
<span class="sd">                formatted location is expected as the return value. The callable can</span>
<span class="sd">                be used for string formatting logic that `.format(**kwargs)` doesn&#39;t</span>
<span class="sd">                support. **Note**: this only works for tasks running against a</span>
<span class="sd">                backend API.</span>
<span class="sd">            nout (Optional[int]): for tasks that return multiple results, the number of</span>
<span class="sd">                outputs to expect. If not provided, will be inferred from the task</span>
<span class="sd">                return annotation, if possible.  Note that `nout=1` implies the task</span>
<span class="sd">                returns a tuple of one value (leave as `None` for non-tuple return</span>
<span class="sd">                types).</span>

<span class="sd">        &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

        <span class="c1"># apply some defaults but allow overrides</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">):</span>
            <span class="n">log_stdout</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;save_db_result&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PrefectResult</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">_unique_db_location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="n">log_stdout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@inject</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">result</span><span class="p">,</span>
        <span class="n">results_db_service</span><span class="p">:</span> <span class="n">ResultsDB</span> <span class="o">=</span> <span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">results_db_service</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert result into the results database service. Creates a PrefectResult that</span>
<span class="sd">        contains minimal representative information for reconstruction.</span>

<span class="sd">        Args:</span>
<span class="sd">            result (Result): Result object to save</span>
<span class="sd">            results_db_service (ResultsDB): Results database service</span>


<span class="sd">        Returns:</span>
<span class="sd">            dict: Unique representation for collecting results.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">results_db_service</span><span class="o">=</span><span class="n">results_db_service</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">unique_rep</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="lume_services.tasks.db.SaveDBResult.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>This task is defined as a subclass of the Prefect <a href="https://docs-v1.prefect.io/api/latest/core/task.html#task-2">Task</a>
object and accepts all Task arguments during initialization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of this task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>slug</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The slug for this task. Slugs provide a stable ID
for tasks so that the Prefect API can identify task run states. If a
slug is not provided, one will be generated automatically once the
task is added to a Flow.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tags</code>
            </td>
            <td>
                  <code>Optional[List[str]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tags for this task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_retries</code>
            </td>
            <td>
                  <code>Optional[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum amount of times this task can be
retried</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>retry_delay</code>
            </td>
            <td>
                  <code>Optional[timedelta]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time to wait
until task is retried</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>retry_on</code>
            </td>
            <td>
                  <code>Optional[Union[Exception, Iterable[Type[Exception]]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception
types that will allow retry behavior to occur. If not set, all
exceptions will allow retries. If set, retries will only occur if the
exception is a subtype of the exception types provided.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code>Optional[Union[int, timedelta]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time (in seconds)
to wait while running this task before a timeout occurs; note that
sub-second resolution is not supported, even when passing in a
timedelta.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trigger</code>
            </td>
            <td>
                  <code>Optional[callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a function that determines whether the task
should run, based on the states of any upstream tasks.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skip_on_upstream_skip</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, if any immediately upstream
tasks are skipped, this task will automatically be skipped as well,
regardless of trigger. By default, this prevents tasks from attempting
to use either state or data from tasks that didn't run. If False, the
task's trigger will be called as normal, with skips considered
successes. Defaults to True.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_for</code>
            </td>
            <td>
                  <code>Optional[timedelta]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time to maintain a cache</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_validator</code>
            </td>
            <td>
                  <code>Optional[Callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Validator that will determine
whether the cache for this task is still valid (only required if
<code>cache_for</code> is provided; defaults to
<code>prefect.engine.cache_validators.duration_only</code>)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_key</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if provided, a <code>cache_key</code>
serves as a unique identifier for this Task's cache, and can be shared
across both Tasks <em>and</em> Flows; if not provided, the Task's <em>name</em> will
be used if running locally, or the Task's database ID if running in
Cloud</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>checkpoint</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if this Task is successful, whether to
store its result using the configured result available during the run;
Also note that checkpointing will only occur locally if
<code>prefect.config.flows.checkpointing</code> is set to <code>True</code></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>result</code>
            </td>
            <td>
                  <code>Optional[Result]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the result instance used to retrieve and
store task results during execution</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target</code>
            </td>
            <td>
                  <code>Optional[Union[str, Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>location to check for task Result.
If a result exists at that location then the task run will enter a
cached state. <code>target</code> strings can be templated formatting strings
which will be formatted at runtime with values from <code>prefect.context</code>.
If a callable function is provided, it should have signature
<code>callable(**kwargs) -&gt; str</code> and at write time all formatting kwargs
will be passed and a fully formatted location is expected as the return
value. The callable can be used for string formatting logic that
<code>.format(**kwargs)</code> doesn't support.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>state_handlers</code>
            </td>
            <td>
                  <code>Optional[Iterable[Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of state change
handlers that will be called whenever the task changes state,
providing an opportunity to inspect or modify the new state. The
handler will be passed the task instance, the old (prior) state,
and the new
(current) state, with the following signature:
    <code>state_handler(task: Task, old_state: State, new_state: State) -&gt;
    Optional[State]</code>
If multiple functions are passed, then the <code>new_state</code> argument will
be the result of the previous handler.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_failure</code>
            </td>
            <td>
                  <code>Optional[Callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function with signature
<code>fn(task: Task, state: State) -&gt; None</code> that will be called anytime this
Task enters a failure state</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_stdout</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Toggle whether or not to send stdout messages
to the Prefect logger. Defaults to <code>False</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_run_name</code>
            </td>
            <td>
                  <code>Optional[Union[str, Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a name to set for this task
at runtime. <code>task_run_name</code> strings can be templated formatting strings
which will be formatted at runtime with values from task arguments,
<code>prefect.context</code>, and flow parameters (in the case of a name conflict
between these, earlier values take precedence). If a callable function
is provided, it should have signature <code>callable(**kwargs) -&gt; str</code> and
at write time all formatting kwargs will be passed and a fully
formatted location is expected as the return value. The callable can
be used for string formatting logic that <code>.format(**kwargs)</code> doesn't
support. <strong>Note</strong>: this only works for tasks running against a
backend API.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nout</code>
            </td>
            <td>
                  <code>Optional[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>for tasks that return multiple results, the number of
outputs to expect. If not provided, will be inferred from the task
return annotation, if possible.  Note that <code>nout=1</code> implies the task
returns a tuple of one value (leave as <code>None</code> for non-tuple return
types).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/db.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">    object and accepts all Task arguments during initialization.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (Optional[str]): The name of this task.</span>
<span class="sd">        slug (Optional[str]):  The slug for this task. Slugs provide a stable ID</span>
<span class="sd">            for tasks so that the Prefect API can identify task run states. If a</span>
<span class="sd">            slug is not provided, one will be generated automatically once the</span>
<span class="sd">            task is added to a Flow.</span>
<span class="sd">        tags (Optional[List[str]]): A list of tags for this task.</span>
<span class="sd">        max_retries (Optional[int]): The maximum amount of times this task can be</span>
<span class="sd">            retried</span>
<span class="sd">        retry_delay (Optional[datetime.timedelta]): The amount of time to wait</span>
<span class="sd">            until task is retried</span>
<span class="sd">        retry_on (Optional[Union[Exception, Iterable[Type[Exception]]]]): Exception</span>
<span class="sd">            types that will allow retry behavior to occur. If not set, all</span>
<span class="sd">            exceptions will allow retries. If set, retries will only occur if the</span>
<span class="sd">            exception is a subtype of the exception types provided.</span>
<span class="sd">        timeout (Optional[Union[int, timedelta]]): The amount of time (in seconds)</span>
<span class="sd">            to wait while running this task before a timeout occurs; note that</span>
<span class="sd">            sub-second resolution is not supported, even when passing in a</span>
<span class="sd">            timedelta.</span>
<span class="sd">        trigger (Optional[callable]):  a function that determines whether the task</span>
<span class="sd">            should run, based on the states of any upstream tasks.</span>
<span class="sd">        skip_on_upstream_skip (Optional[bool]): if True, if any immediately upstream</span>
<span class="sd">            tasks are skipped, this task will automatically be skipped as well,</span>
<span class="sd">            regardless of trigger. By default, this prevents tasks from attempting</span>
<span class="sd">            to use either state or data from tasks that didn&#39;t run. If False, the</span>
<span class="sd">            task&#39;s trigger will be called as normal, with skips considered</span>
<span class="sd">            successes. Defaults to True.</span>
<span class="sd">        cache_for (Optional[timedelta]): The amount of time to maintain a cache</span>
<span class="sd">        of the outputs of this task.  Useful for situations where the containing</span>
<span class="sd">        Flow will be rerun multiple times, but this task doesn&#39;t need to be.</span>
<span class="sd">        cache_validator (Optional[Callable]): Validator that will determine</span>
<span class="sd">            whether the cache for this task is still valid (only required if</span>
<span class="sd">            `cache_for` is provided; defaults to</span>
<span class="sd">            `prefect.engine.cache_validators.duration_only`)</span>
<span class="sd">        cache_key (Optional[str]): if provided, a `cache_key`</span>
<span class="sd">            serves as a unique identifier for this Task&#39;s cache, and can be shared</span>
<span class="sd">            across both Tasks _and_ Flows; if not provided, the Task&#39;s _name_ will</span>
<span class="sd">            be used if running locally, or the Task&#39;s database ID if running in</span>
<span class="sd">            Cloud</span>
<span class="sd">        checkpoint (Optional[bool]): if this Task is successful, whether to</span>
<span class="sd">            store its result using the configured result available during the run;</span>
<span class="sd">            Also note that checkpointing will only occur locally if</span>
<span class="sd">            `prefect.config.flows.checkpointing` is set to `True`</span>
<span class="sd">        result (Optional[Result]): the result instance used to retrieve and</span>
<span class="sd">            store task results during execution</span>
<span class="sd">        target (Optional[Union[str, Callable]]): location to check for task Result.</span>
<span class="sd">            If a result exists at that location then the task run will enter a</span>
<span class="sd">            cached state. `target` strings can be templated formatting strings</span>
<span class="sd">            which will be formatted at runtime with values from `prefect.context`.</span>
<span class="sd">            If a callable function is provided, it should have signature</span>
<span class="sd">            `callable(**kwargs) -&gt; str` and at write time all formatting kwargs</span>
<span class="sd">            will be passed and a fully formatted location is expected as the return</span>
<span class="sd">            value. The callable can be used for string formatting logic that</span>
<span class="sd">            `.format(**kwargs)` doesn&#39;t support.</span>
<span class="sd">        state_handlers (Optional[Iterable[Callable]]): A list of state change</span>
<span class="sd">            handlers that will be called whenever the task changes state,</span>
<span class="sd">            providing an opportunity to inspect or modify the new state. The</span>
<span class="sd">            handler will be passed the task instance, the old (prior) state,</span>
<span class="sd">            and the new</span>
<span class="sd">            (current) state, with the following signature:</span>
<span class="sd">                `state_handler(task: Task, old_state: State, new_state: State) -&gt;</span>
<span class="sd">                Optional[State]`</span>
<span class="sd">            If multiple functions are passed, then the `new_state` argument will</span>
<span class="sd">            be the result of the previous handler.</span>
<span class="sd">        on_failure (Optional[Callable]): A function with signature</span>
<span class="sd">            `fn(task: Task, state: State) -&gt; None` that will be called anytime this</span>
<span class="sd">            Task enters a failure state</span>
<span class="sd">        log_stdout (Optional[bool]): Toggle whether or not to send stdout messages</span>
<span class="sd">            to the Prefect logger. Defaults to `False`.</span>
<span class="sd">        task_run_name (Optional[Union[str, Callable]]): a name to set for this task</span>
<span class="sd">            at runtime. `task_run_name` strings can be templated formatting strings</span>
<span class="sd">            which will be formatted at runtime with values from task arguments,</span>
<span class="sd">            `prefect.context`, and flow parameters (in the case of a name conflict</span>
<span class="sd">            between these, earlier values take precedence). If a callable function</span>
<span class="sd">            is provided, it should have signature `callable(**kwargs) -&gt; str` and</span>
<span class="sd">            at write time all formatting kwargs will be passed and a fully</span>
<span class="sd">            formatted location is expected as the return value. The callable can</span>
<span class="sd">            be used for string formatting logic that `.format(**kwargs)` doesn&#39;t</span>
<span class="sd">            support. **Note**: this only works for tasks running against a</span>
<span class="sd">            backend API.</span>
<span class="sd">        nout (Optional[int]): for tasks that return multiple results, the number of</span>
<span class="sd">            outputs to expect. If not provided, will be inferred from the task</span>
<span class="sd">            return annotation, if possible.  Note that `nout=1` implies the task</span>
<span class="sd">            returns a tuple of one value (leave as `None` for non-tuple return</span>
<span class="sd">            types).</span>

<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

    <span class="c1"># apply some defaults but allow overrides</span>
    <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">):</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;save_db_result&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">PrefectResult</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">_unique_db_location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="n">log_stdout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="lume_services.tasks.db.SaveDBResult.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">results_db_service</span><span class="o">=</span><span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">results_db_service</span><span class="p">])</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Insert result into the results database service. Creates a PrefectResult that
contains minimal representative information for reconstruction.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>result</code>
            </td>
            <td>
                  <code>Result</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Result object to save</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>results_db_service</code>
            </td>
            <td>
                  <code>ResultsDB</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Results database service</p>
              </div>
            </td>
            <td>
                  <code>Provide[results_db_service]</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique representation for collecting results.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/db.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@inject</span>
<span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">result</span><span class="p">,</span>
    <span class="n">results_db_service</span><span class="p">:</span> <span class="n">ResultsDB</span> <span class="o">=</span> <span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">results_db_service</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Insert result into the results database service. Creates a PrefectResult that</span>
<span class="sd">    contains minimal representative information for reconstruction.</span>

<span class="sd">    Args:</span>
<span class="sd">        result (Result): Result object to save</span>
<span class="sd">        results_db_service (ResultsDB): Results database service</span>


<span class="sd">    Returns:</span>
<span class="sd">        dict: Unique representation for collecting results.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">results_db_service</span><span class="o">=</span><span class="n">results_db_service</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">unique_rep</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="lume_services.tasks.file"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="lume_services.tasks.file.LoadFile" class="doc doc-heading">
            <code>LoadFile</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>Task</code></p>







              <details class="quote">
                <summary>Source code in <code>lume_services/tasks/file.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LoadFile</span><span class="p">(</span><span class="n">Task</span><span class="p">):</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;file_rep&quot;</span><span class="p">:</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;file_rep&quot;</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">        object and accepts all Task arguments during initialization.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (Optional[str]): The name of this task.</span>
<span class="sd">            slug (Optional[str]):  The slug for this task. Slugs provide a stable ID</span>
<span class="sd">                for tasks so that the Prefect API can identify task run states. If a</span>
<span class="sd">                slug is not provided, one will be generated automatically once the</span>
<span class="sd">                task is added to a Flow.</span>
<span class="sd">            tags (Optional[List[str]]): A list of tags for this task.</span>
<span class="sd">            max_retries (Optional[int]): The maximum amount of times this task can be</span>
<span class="sd">                retried</span>
<span class="sd">            retry_delay (Optional[datetime.timedelta]): The amount of time to wait</span>
<span class="sd">                until task is retried</span>
<span class="sd">            retry_on (Optional[Union[Exception, Iterable[Type[Exception]]]]): Exception</span>
<span class="sd">                types that will allow retry behavior to occur. If not set, all</span>
<span class="sd">                exceptions will allow retries. If set, retries will only occur if the</span>
<span class="sd">                exception is a subtype of the exception types provided.</span>
<span class="sd">            timeout (Optional[Union[int, timedelta]]): The amount of time (in seconds)</span>
<span class="sd">                to wait while running this task before a timeout occurs; note that</span>
<span class="sd">                sub-second resolution is not supported, even when passing in a</span>
<span class="sd">                timedelta.</span>
<span class="sd">            trigger (Optional[callable]):  a function that determines whether the task</span>
<span class="sd">                should run, based on the states of any upstream tasks.</span>
<span class="sd">            skip_on_upstream_skip (Optional[bool]): if True, if any immediately upstream</span>
<span class="sd">                tasks are skipped, this task will automatically be skipped as well,</span>
<span class="sd">                regardless of trigger. By default, this prevents tasks from attempting</span>
<span class="sd">                to use either state or data from tasks that didn&#39;t run. If False, the</span>
<span class="sd">                task&#39;s trigger will be called as normal, with skips considered</span>
<span class="sd">                successes. Defaults to True.</span>
<span class="sd">            cache_for (Optional[timedelta]): The amount of time to maintain a cache</span>
<span class="sd">            of the outputs of this task.  Useful for situations where the containing</span>
<span class="sd">            Flow will be rerun multiple times, but this task doesn&#39;t need to be.</span>
<span class="sd">            cache_validator (Optional[Callable]): Validator that will determine</span>
<span class="sd">                whether the cache for this task is still valid (only required if</span>
<span class="sd">                `cache_for` is provided; defaults to</span>
<span class="sd">                `prefect.engine.cache_validators.duration_only`)</span>
<span class="sd">            cache_key (Optional[str]): if provided, a `cache_key`</span>
<span class="sd">                serves as a unique identifier for this Task&#39;s cache, and can be shared</span>
<span class="sd">                across both Tasks _and_ Flows; if not provided, the Task&#39;s _name_ will</span>
<span class="sd">                be used if running locally, or the Task&#39;s database ID if running in</span>
<span class="sd">                Cloud</span>
<span class="sd">            checkpoint (Optional[bool]): if this Task is successful, whether to</span>
<span class="sd">                store its result using the configured result available during the run;</span>
<span class="sd">                Also note that checkpointing will only occur locally if</span>
<span class="sd">                `prefect.config.flows.checkpointing` is set to `True`</span>
<span class="sd">            result (Optional[Result]): the result instance used to retrieve and</span>
<span class="sd">                store task results during execution</span>
<span class="sd">            target (Optional[Union[str, Callable]]): location to check for task Result.</span>
<span class="sd">                If a result exists at that location then the task run will enter a</span>
<span class="sd">                cached state. `target` strings can be templated formatting strings</span>
<span class="sd">                which will be formatted at runtime with values from `prefect.context`.</span>
<span class="sd">                If a callable function is provided, it should have signature</span>
<span class="sd">                `callable(**kwargs) -&gt; str` and at write time all formatting kwargs</span>
<span class="sd">                will be passed and a fully formatted location is expected as the return</span>
<span class="sd">                value. The callable can be used for string formatting logic that</span>
<span class="sd">                `.format(**kwargs)` doesn&#39;t support.</span>
<span class="sd">            state_handlers (Optional[Iterable[Callable]]): A list of state change</span>
<span class="sd">                handlers that will be called whenever the task changes state,</span>
<span class="sd">                providing an opportunity to inspect or modify the new state. The</span>
<span class="sd">                handler will be passed the task instance, the old (prior) state,</span>
<span class="sd">                and the new</span>
<span class="sd">                (current) state, with the following signature:</span>
<span class="sd">                    `state_handler(task: Task, old_state: State, new_state: State) -&gt;</span>
<span class="sd">                    Optional[State]`</span>
<span class="sd">                If multiple functions are passed, then the `new_state` argument will</span>
<span class="sd">                be the result of the previous handler.</span>
<span class="sd">            on_failure (Optional[Callable]): A function with signature</span>
<span class="sd">                `fn(task: Task, state: State) -&gt; None` that will be called anytime this</span>
<span class="sd">                Task enters a failure state</span>
<span class="sd">            log_stdout (Optional[bool]): Toggle whether or not to send stdout messages</span>
<span class="sd">                to the Prefect logger. Defaults to `False`.</span>
<span class="sd">            task_run_name (Optional[Union[str, Callable]]): a name to set for this task</span>
<span class="sd">                at runtime. `task_run_name` strings can be templated formatting strings</span>
<span class="sd">                which will be formatted at runtime with values from task arguments,</span>
<span class="sd">                `prefect.context`, and flow parameters (in the case of a name conflict</span>
<span class="sd">                between these, earlier values take precedence). If a callable function</span>
<span class="sd">                is provided, it should have signature `callable(**kwargs) -&gt; str` and</span>
<span class="sd">                at write time all formatting kwargs will be passed and a fully</span>
<span class="sd">                formatted location is expected as the return value. The callable can</span>
<span class="sd">                be used for string formatting logic that `.format(**kwargs)` doesn&#39;t</span>
<span class="sd">                support. **Note**: this only works for tasks running against a</span>
<span class="sd">                backend API.</span>
<span class="sd">            nout (Optional[int]): for tasks that return multiple results, the number of</span>
<span class="sd">                outputs to expect. If not provided, will be inferred from the task</span>
<span class="sd">                return annotation, if possible.  Note that `nout=1` implies the task</span>
<span class="sd">                returns a tuple of one value (leave as `None` for non-tuple return</span>
<span class="sd">                types).</span>

<span class="sd">        &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

        <span class="c1"># apply some defaults but allow overrides</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">):</span>
            <span class="n">log_stdout</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;load_file&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="n">log_stdout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@inject</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">file_rep</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">file_service</span><span class="p">:</span> <span class="n">FileService</span> <span class="o">=</span> <span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">file_service</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a file</span>

<span class="sd">        Args:</span>
<span class="sd">            file_rep (dict): File data representation</span>
<span class="sd">            file_service (FileService): File service for interacting w/ filesystems</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: Unserialize file object</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">file_type</span> <span class="o">=</span> <span class="n">get_file_from_serializer_string</span><span class="p">(</span><span class="n">file_rep</span><span class="p">[</span><span class="s2">&quot;file_type_string&quot;</span><span class="p">])</span>
        <span class="n">file_result</span> <span class="o">=</span> <span class="n">file_type</span><span class="p">(</span><span class="o">**</span><span class="n">file_rep</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">file_result</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">file_service</span><span class="o">=</span><span class="n">file_service</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="lume_services.tasks.file.LoadFile.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>This task is defined as a subclass of the Prefect <a href="https://docs-v1.prefect.io/api/latest/core/task.html#task-2">Task</a>
object and accepts all Task arguments during initialization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of this task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>slug</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The slug for this task. Slugs provide a stable ID
for tasks so that the Prefect API can identify task run states. If a
slug is not provided, one will be generated automatically once the
task is added to a Flow.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tags</code>
            </td>
            <td>
                  <code>Optional[List[str]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tags for this task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_retries</code>
            </td>
            <td>
                  <code>Optional[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum amount of times this task can be
retried</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>retry_delay</code>
            </td>
            <td>
                  <code>Optional[timedelta]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time to wait
until task is retried</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>retry_on</code>
            </td>
            <td>
                  <code>Optional[Union[Exception, Iterable[Type[Exception]]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception
types that will allow retry behavior to occur. If not set, all
exceptions will allow retries. If set, retries will only occur if the
exception is a subtype of the exception types provided.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code>Optional[Union[int, timedelta]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time (in seconds)
to wait while running this task before a timeout occurs; note that
sub-second resolution is not supported, even when passing in a
timedelta.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trigger</code>
            </td>
            <td>
                  <code>Optional[callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a function that determines whether the task
should run, based on the states of any upstream tasks.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skip_on_upstream_skip</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, if any immediately upstream
tasks are skipped, this task will automatically be skipped as well,
regardless of trigger. By default, this prevents tasks from attempting
to use either state or data from tasks that didn't run. If False, the
task's trigger will be called as normal, with skips considered
successes. Defaults to True.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_for</code>
            </td>
            <td>
                  <code>Optional[timedelta]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time to maintain a cache</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_validator</code>
            </td>
            <td>
                  <code>Optional[Callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Validator that will determine
whether the cache for this task is still valid (only required if
<code>cache_for</code> is provided; defaults to
<code>prefect.engine.cache_validators.duration_only</code>)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_key</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if provided, a <code>cache_key</code>
serves as a unique identifier for this Task's cache, and can be shared
across both Tasks <em>and</em> Flows; if not provided, the Task's <em>name</em> will
be used if running locally, or the Task's database ID if running in
Cloud</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>checkpoint</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if this Task is successful, whether to
store its result using the configured result available during the run;
Also note that checkpointing will only occur locally if
<code>prefect.config.flows.checkpointing</code> is set to <code>True</code></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>result</code>
            </td>
            <td>
                  <code>Optional[Result]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the result instance used to retrieve and
store task results during execution</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target</code>
            </td>
            <td>
                  <code>Optional[Union[str, Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>location to check for task Result.
If a result exists at that location then the task run will enter a
cached state. <code>target</code> strings can be templated formatting strings
which will be formatted at runtime with values from <code>prefect.context</code>.
If a callable function is provided, it should have signature
<code>callable(**kwargs) -&gt; str</code> and at write time all formatting kwargs
will be passed and a fully formatted location is expected as the return
value. The callable can be used for string formatting logic that
<code>.format(**kwargs)</code> doesn't support.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>state_handlers</code>
            </td>
            <td>
                  <code>Optional[Iterable[Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of state change
handlers that will be called whenever the task changes state,
providing an opportunity to inspect or modify the new state. The
handler will be passed the task instance, the old (prior) state,
and the new
(current) state, with the following signature:
    <code>state_handler(task: Task, old_state: State, new_state: State) -&gt;
    Optional[State]</code>
If multiple functions are passed, then the <code>new_state</code> argument will
be the result of the previous handler.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_failure</code>
            </td>
            <td>
                  <code>Optional[Callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function with signature
<code>fn(task: Task, state: State) -&gt; None</code> that will be called anytime this
Task enters a failure state</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_stdout</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Toggle whether or not to send stdout messages
to the Prefect logger. Defaults to <code>False</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_run_name</code>
            </td>
            <td>
                  <code>Optional[Union[str, Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a name to set for this task
at runtime. <code>task_run_name</code> strings can be templated formatting strings
which will be formatted at runtime with values from task arguments,
<code>prefect.context</code>, and flow parameters (in the case of a name conflict
between these, earlier values take precedence). If a callable function
is provided, it should have signature <code>callable(**kwargs) -&gt; str</code> and
at write time all formatting kwargs will be passed and a fully
formatted location is expected as the return value. The callable can
be used for string formatting logic that <code>.format(**kwargs)</code> doesn't
support. <strong>Note</strong>: this only works for tasks running against a
backend API.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nout</code>
            </td>
            <td>
                  <code>Optional[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>for tasks that return multiple results, the number of
outputs to expect. If not provided, will be inferred from the task
return annotation, if possible.  Note that <code>nout=1</code> implies the task
returns a tuple of one value (leave as <code>None</code> for non-tuple return
types).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">    object and accepts all Task arguments during initialization.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (Optional[str]): The name of this task.</span>
<span class="sd">        slug (Optional[str]):  The slug for this task. Slugs provide a stable ID</span>
<span class="sd">            for tasks so that the Prefect API can identify task run states. If a</span>
<span class="sd">            slug is not provided, one will be generated automatically once the</span>
<span class="sd">            task is added to a Flow.</span>
<span class="sd">        tags (Optional[List[str]]): A list of tags for this task.</span>
<span class="sd">        max_retries (Optional[int]): The maximum amount of times this task can be</span>
<span class="sd">            retried</span>
<span class="sd">        retry_delay (Optional[datetime.timedelta]): The amount of time to wait</span>
<span class="sd">            until task is retried</span>
<span class="sd">        retry_on (Optional[Union[Exception, Iterable[Type[Exception]]]]): Exception</span>
<span class="sd">            types that will allow retry behavior to occur. If not set, all</span>
<span class="sd">            exceptions will allow retries. If set, retries will only occur if the</span>
<span class="sd">            exception is a subtype of the exception types provided.</span>
<span class="sd">        timeout (Optional[Union[int, timedelta]]): The amount of time (in seconds)</span>
<span class="sd">            to wait while running this task before a timeout occurs; note that</span>
<span class="sd">            sub-second resolution is not supported, even when passing in a</span>
<span class="sd">            timedelta.</span>
<span class="sd">        trigger (Optional[callable]):  a function that determines whether the task</span>
<span class="sd">            should run, based on the states of any upstream tasks.</span>
<span class="sd">        skip_on_upstream_skip (Optional[bool]): if True, if any immediately upstream</span>
<span class="sd">            tasks are skipped, this task will automatically be skipped as well,</span>
<span class="sd">            regardless of trigger. By default, this prevents tasks from attempting</span>
<span class="sd">            to use either state or data from tasks that didn&#39;t run. If False, the</span>
<span class="sd">            task&#39;s trigger will be called as normal, with skips considered</span>
<span class="sd">            successes. Defaults to True.</span>
<span class="sd">        cache_for (Optional[timedelta]): The amount of time to maintain a cache</span>
<span class="sd">        of the outputs of this task.  Useful for situations where the containing</span>
<span class="sd">        Flow will be rerun multiple times, but this task doesn&#39;t need to be.</span>
<span class="sd">        cache_validator (Optional[Callable]): Validator that will determine</span>
<span class="sd">            whether the cache for this task is still valid (only required if</span>
<span class="sd">            `cache_for` is provided; defaults to</span>
<span class="sd">            `prefect.engine.cache_validators.duration_only`)</span>
<span class="sd">        cache_key (Optional[str]): if provided, a `cache_key`</span>
<span class="sd">            serves as a unique identifier for this Task&#39;s cache, and can be shared</span>
<span class="sd">            across both Tasks _and_ Flows; if not provided, the Task&#39;s _name_ will</span>
<span class="sd">            be used if running locally, or the Task&#39;s database ID if running in</span>
<span class="sd">            Cloud</span>
<span class="sd">        checkpoint (Optional[bool]): if this Task is successful, whether to</span>
<span class="sd">            store its result using the configured result available during the run;</span>
<span class="sd">            Also note that checkpointing will only occur locally if</span>
<span class="sd">            `prefect.config.flows.checkpointing` is set to `True`</span>
<span class="sd">        result (Optional[Result]): the result instance used to retrieve and</span>
<span class="sd">            store task results during execution</span>
<span class="sd">        target (Optional[Union[str, Callable]]): location to check for task Result.</span>
<span class="sd">            If a result exists at that location then the task run will enter a</span>
<span class="sd">            cached state. `target` strings can be templated formatting strings</span>
<span class="sd">            which will be formatted at runtime with values from `prefect.context`.</span>
<span class="sd">            If a callable function is provided, it should have signature</span>
<span class="sd">            `callable(**kwargs) -&gt; str` and at write time all formatting kwargs</span>
<span class="sd">            will be passed and a fully formatted location is expected as the return</span>
<span class="sd">            value. The callable can be used for string formatting logic that</span>
<span class="sd">            `.format(**kwargs)` doesn&#39;t support.</span>
<span class="sd">        state_handlers (Optional[Iterable[Callable]]): A list of state change</span>
<span class="sd">            handlers that will be called whenever the task changes state,</span>
<span class="sd">            providing an opportunity to inspect or modify the new state. The</span>
<span class="sd">            handler will be passed the task instance, the old (prior) state,</span>
<span class="sd">            and the new</span>
<span class="sd">            (current) state, with the following signature:</span>
<span class="sd">                `state_handler(task: Task, old_state: State, new_state: State) -&gt;</span>
<span class="sd">                Optional[State]`</span>
<span class="sd">            If multiple functions are passed, then the `new_state` argument will</span>
<span class="sd">            be the result of the previous handler.</span>
<span class="sd">        on_failure (Optional[Callable]): A function with signature</span>
<span class="sd">            `fn(task: Task, state: State) -&gt; None` that will be called anytime this</span>
<span class="sd">            Task enters a failure state</span>
<span class="sd">        log_stdout (Optional[bool]): Toggle whether or not to send stdout messages</span>
<span class="sd">            to the Prefect logger. Defaults to `False`.</span>
<span class="sd">        task_run_name (Optional[Union[str, Callable]]): a name to set for this task</span>
<span class="sd">            at runtime. `task_run_name` strings can be templated formatting strings</span>
<span class="sd">            which will be formatted at runtime with values from task arguments,</span>
<span class="sd">            `prefect.context`, and flow parameters (in the case of a name conflict</span>
<span class="sd">            between these, earlier values take precedence). If a callable function</span>
<span class="sd">            is provided, it should have signature `callable(**kwargs) -&gt; str` and</span>
<span class="sd">            at write time all formatting kwargs will be passed and a fully</span>
<span class="sd">            formatted location is expected as the return value. The callable can</span>
<span class="sd">            be used for string formatting logic that `.format(**kwargs)` doesn&#39;t</span>
<span class="sd">            support. **Note**: this only works for tasks running against a</span>
<span class="sd">            backend API.</span>
<span class="sd">        nout (Optional[int]): for tasks that return multiple results, the number of</span>
<span class="sd">            outputs to expect. If not provided, will be inferred from the task</span>
<span class="sd">            return annotation, if possible.  Note that `nout=1` implies the task</span>
<span class="sd">            returns a tuple of one value (leave as `None` for non-tuple return</span>
<span class="sd">            types).</span>

<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

    <span class="c1"># apply some defaults but allow overrides</span>
    <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">):</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;load_file&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="n">log_stdout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="lume_services.tasks.file.LoadFile.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">file_rep</span><span class="p">,</span> <span class="n">file_service</span><span class="o">=</span><span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">file_service</span><span class="p">])</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Load a file</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_rep</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File data representation</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_service</code>
            </td>
            <td>
                  <code>FileService</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File service for interacting w/ filesystems</p>
              </div>
            </td>
            <td>
                  <code>Provide[file_service]</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code>Any</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unserialize file object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@inject</span>
<span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">file_rep</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">file_service</span><span class="p">:</span> <span class="n">FileService</span> <span class="o">=</span> <span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">file_service</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a file</span>

<span class="sd">    Args:</span>
<span class="sd">        file_rep (dict): File data representation</span>
<span class="sd">        file_service (FileService): File service for interacting w/ filesystems</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: Unserialize file object</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">file_type</span> <span class="o">=</span> <span class="n">get_file_from_serializer_string</span><span class="p">(</span><span class="n">file_rep</span><span class="p">[</span><span class="s2">&quot;file_type_string&quot;</span><span class="p">])</span>
    <span class="n">file_result</span> <span class="o">=</span> <span class="n">file_type</span><span class="p">(</span><span class="o">**</span><span class="n">file_rep</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">file_result</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">file_service</span><span class="o">=</span><span class="n">file_service</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="lume_services.tasks.file.SaveFile" class="doc doc-heading">
            <code>SaveFile</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>Task</code></p>


        <p>This task is used to save a workflow file to a filesystem for subsequent
retrieval. File saving supports all File objects described in
<a href="https://slaclab.github.io/lume-services/api/files/files/">LUME-services</a>.
Additional file types can be created by subclassing the base in
<code>lume_services.files.file</code>. The <code>SaveFile</code> task relies on a ...
EXPOUND ON FILESYSTEM IDENTIFIER</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">Parameter</span>
<span class="kn">from</span> <span class="nn">lume_services.results</span> <span class="kn">import</span> <span class="n">Result</span>
<span class="kn">from</span> <span class="nn">lume_services.tasks</span> <span class="kn">import</span> <span class="n">configure_lume_services</span><span class="p">,</span> <span class="n">SaveFile</span>
<span class="kn">from</span> <span class="nn">lume_services.files</span> <span class="kn">import</span> <span class="n">TextFile</span>

<span class="c1"># construct task with prefect Task options</span>
<span class="n">save_file_task</span> <span class="o">=</span> <span class="n">SaveFile</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="nd">@task</span>
<span class="k">def</span> <span class="nf">concatenate_text</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">text1</span> <span class="o">+</span> <span class="n">text2</span>
    <span class="k">return</span> <span class="n">TextFile</span><span class="p">(</span>
                <span class="n">text</span><span class="p">,</span>
                <span class="n">filesystem_identifier</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">,</span>
                <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;concatenated_text.txt&quot;</span>
            <span class="p">)</span>


<span class="k">with</span> <span class="n">Flow</span><span class="p">(</span>
    <span class="s2">&quot;my_flow&quot;</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">flow</span><span class="p">:</span>
    <span class="c1"># must first configure services because using injected results</span>
    <span class="c1"># database service</span>
    <span class="n">configure_lume_services</span><span class="p">()</span>

    <span class="n">text1</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;text1&quot;</span><span class="p">)</span>
    <span class="n">text2</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>

    <span class="n">my_file_obj</span> <span class="o">=</span> <span class="n">concatenate_text</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">)</span>

    <span class="n">file_parameters</span> <span class="o">=</span> <span class="n">save_file_task</span><span class="o">.</span><span class="n">parameters</span>

    <span class="n">my_result</span> <span class="o">=</span> <span class="n">save_file_task</span><span class="p">(</span>
        <span class="n">my_file_obj</span><span class="p">,</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">file_parameters</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
        <span class="n">filesystem_identifier</span> <span class="o">=</span> <span class="n">file_parameters</span><span class="p">[</span><span class="s2">&quot;filesystem_identifier&quot;</span><span class="p">],</span>
        <span class="n">file_type</span> <span class="o">=</span> <span class="n">TextFile</span> <span class="c1"># THIS MUST BE PASSED IN THE TASK CALL</span>
    <span class="p">)</span>
</code></pre></div>






              <details class="quote">
                <summary>Source code in <code>lume_services/tasks/file.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SaveFile</span><span class="p">(</span><span class="n">Task</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This task is used to save a workflow file to a filesystem for subsequent</span>
<span class="sd">    retrieval. File saving supports all File objects described in</span>
<span class="sd">    [LUME-services](https://slaclab.github.io/lume-services/api/files/files/).</span>
<span class="sd">    Additional file types can be created by subclassing the base in</span>
<span class="sd">    `lume_services.files.file`. The `SaveFile` task relies on a ...</span>
<span class="sd">    EXPOUND ON FILESYSTEM IDENTIFIER</span>

<span class="sd">    Examples:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import Flow, task, Parameter</span>
<span class="sd">        from lume_services.results import Result</span>
<span class="sd">        from lume_services.tasks import configure_lume_services, SaveFile</span>
<span class="sd">        from lume_services.files import TextFile</span>

<span class="sd">        # construct task with prefect Task options</span>
<span class="sd">        save_file_task = SaveFile(timeout=20)</span>

<span class="sd">        @task</span>
<span class="sd">        def concatenate_text(text1, text2):</span>
<span class="sd">            text = text1 + text2</span>
<span class="sd">            return TextFile(</span>
<span class="sd">                        text,</span>
<span class="sd">                        filesystem_identifier=&quot;local&quot;,</span>
<span class="sd">                        filename=&quot;concatenated_text.txt&quot;</span>
<span class="sd">                    )</span>


<span class="sd">        with Flow(</span>
<span class="sd">            &quot;my_flow&quot;</span>
<span class="sd">        ) as flow:</span>
<span class="sd">            # must first configure services because using injected results</span>
<span class="sd">            # database service</span>
<span class="sd">            configure_lume_services()</span>

<span class="sd">            text1 = Parameter(&quot;text1&quot;)</span>
<span class="sd">            text2 = Parameter(&quot;text2&quot;)</span>

<span class="sd">            my_file_obj = concatenate_text(text1, text2)</span>

<span class="sd">            file_parameters = save_file_task.parameters</span>

<span class="sd">            my_result = save_file_task(</span>
<span class="sd">                my_file_obj,</span>
<span class="sd">                filename = file_parameters[&quot;filename&quot;],</span>
<span class="sd">                filesystem_identifier = file_parameters[&quot;filesystem_identifier&quot;],</span>
<span class="sd">                file_type = TextFile # THIS MUST BE PASSED IN THE TASK CALL</span>
<span class="sd">            )</span>

<span class="sd">        ```</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;filename&quot;</span><span class="p">),</span>
        <span class="s2">&quot;filesystem_identifier&quot;</span><span class="p">:</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;filesystem_identifier&quot;</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">        object and accepts all Task arguments during initialization.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (Optional[str]): The name of this task.</span>
<span class="sd">            slug (Optional[str]):  The slug for this task. Slugs provide a stable ID</span>
<span class="sd">                for tasks so that the Prefect API can identify task run states. If a</span>
<span class="sd">                slug is not provided, one will be generated automatically once the</span>
<span class="sd">                task is added to a Flow.</span>
<span class="sd">            tags (Optional[List[str]]): A list of tags for this task.</span>
<span class="sd">            max_retries (Optional[int]): The maximum amount of times this task can be</span>
<span class="sd">                retried</span>
<span class="sd">            retry_delay (Optional[datetime.timedelta]): The amount of time to wait</span>
<span class="sd">                until task is retried</span>
<span class="sd">            retry_on (Optional[Union[Exception, Iterable[Type[Exception]]]]): Exception</span>
<span class="sd">                types that will allow retry behavior to occur. If not set, all</span>
<span class="sd">                exceptions will allow retries. If set, retries will only occur if the</span>
<span class="sd">                exception is a subtype of the exception types provided.</span>
<span class="sd">            timeout (Optional[Union[int, timedelta]]): The amount of time (in seconds)</span>
<span class="sd">                to wait while running this task before a timeout occurs; note that</span>
<span class="sd">                sub-second resolution is not supported, even when passing in a</span>
<span class="sd">                timedelta.</span>
<span class="sd">            trigger (Optional[callable]):  a function that determines whether the task</span>
<span class="sd">                should run, based on the states of any upstream tasks.</span>
<span class="sd">            skip_on_upstream_skip (Optional[bool]): if True, if any immediately upstream</span>
<span class="sd">                tasks are skipped, this task will automatically be skipped as well,</span>
<span class="sd">                regardless of trigger. By default, this prevents tasks from attempting</span>
<span class="sd">                to use either state or data from tasks that didn&#39;t run. If False, the</span>
<span class="sd">                task&#39;s trigger will be called as normal, with skips considered</span>
<span class="sd">                successes. Defaults to True.</span>
<span class="sd">            cache_for (Optional[timedelta]): The amount of time to maintain a cache</span>
<span class="sd">            of the outputs of this task.  Useful for situations where the containing</span>
<span class="sd">            Flow will be rerun multiple times, but this task doesn&#39;t need to be.</span>
<span class="sd">            cache_validator (Optional[Callable]): Validator that will determine</span>
<span class="sd">                whether the cache for this task is still valid (only required if</span>
<span class="sd">                `cache_for` is provided; defaults to</span>
<span class="sd">                `prefect.engine.cache_validators.duration_only`)</span>
<span class="sd">            cache_key (Optional[str]): if provided, a `cache_key`</span>
<span class="sd">                serves as a unique identifier for this Task&#39;s cache, and can be shared</span>
<span class="sd">                across both Tasks _and_ Flows; if not provided, the Task&#39;s _name_ will</span>
<span class="sd">                be used if running locally, or the Task&#39;s database ID if running in</span>
<span class="sd">                Cloud</span>
<span class="sd">            checkpoint (Optional[bool]): if this Task is successful, whether to</span>
<span class="sd">                store its result using the configured result available during the run;</span>
<span class="sd">                Also note that checkpointing will only occur locally if</span>
<span class="sd">                `prefect.config.flows.checkpointing` is set to `True`</span>
<span class="sd">            result (Optional[Result]): the result instance used to retrieve and</span>
<span class="sd">                store task results during execution</span>
<span class="sd">            target (Optional[Union[str, Callable]]): location to check for task Result.</span>
<span class="sd">                If a result exists at that location then the task run will enter a</span>
<span class="sd">                cached state. `target` strings can be templated formatting strings</span>
<span class="sd">                which will be formatted at runtime with values from `prefect.context`.</span>
<span class="sd">                If a callable function is provided, it should have signature</span>
<span class="sd">                `callable(**kwargs) -&gt; str` and at write time all formatting kwargs</span>
<span class="sd">                will be passed and a fully formatted location is expected as the return</span>
<span class="sd">                value. The callable can be used for string formatting logic that</span>
<span class="sd">                `.format(**kwargs)` doesn&#39;t support.</span>
<span class="sd">            state_handlers (Optional[Iterable[Callable]]): A list of state change</span>
<span class="sd">                handlers that will be called whenever the task changes state,</span>
<span class="sd">                providing an opportunity to inspect or modify the new state. The</span>
<span class="sd">                handler will be passed the task instance, the old (prior) state,</span>
<span class="sd">                and the new</span>
<span class="sd">                (current) state, with the following signature:</span>
<span class="sd">                    `state_handler(task: Task, old_state: State, new_state: State) -&gt;</span>
<span class="sd">                    Optional[State]`</span>
<span class="sd">                If multiple functions are passed, then the `new_state` argument will</span>
<span class="sd">                be the result of the previous handler.</span>
<span class="sd">            on_failure (Optional[Callable]): A function with signature</span>
<span class="sd">                `fn(task: Task, state: State) -&gt; None` that will be called anytime this</span>
<span class="sd">                Task enters a failure state</span>
<span class="sd">            log_stdout (Optional[bool]): Toggle whether or not to send stdout messages</span>
<span class="sd">                to the Prefect logger. Defaults to `False`.</span>
<span class="sd">            task_run_name (Optional[Union[str, Callable]]): a name to set for this task</span>
<span class="sd">                at runtime. `task_run_name` strings can be templated formatting strings</span>
<span class="sd">                which will be formatted at runtime with values from task arguments,</span>
<span class="sd">                `prefect.context`, and flow parameters (in the case of a name conflict</span>
<span class="sd">                between these, earlier values take precedence). If a callable function</span>
<span class="sd">                is provided, it should have signature `callable(**kwargs) -&gt; str` and</span>
<span class="sd">                at write time all formatting kwargs will be passed and a fully</span>
<span class="sd">                formatted location is expected as the return value. The callable can</span>
<span class="sd">                be used for string formatting logic that `.format(**kwargs)` doesn&#39;t</span>
<span class="sd">                support. **Note**: this only works for tasks running against a</span>
<span class="sd">                backend API.</span>
<span class="sd">            nout (Optional[int]): for tasks that return multiple results, the number of</span>
<span class="sd">                outputs to expect. If not provided, will be inferred from the task</span>
<span class="sd">                return annotation, if possible.  Note that `nout=1` implies the task</span>
<span class="sd">                returns a tuple of one value (leave as `None` for non-tuple return</span>
<span class="sd">                types).</span>

<span class="sd">        &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

        <span class="c1"># apply some defaults but allow overrides</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">):</span>
            <span class="n">log_stdout</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;save_file&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PrefectResult</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">_unique_file_location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="n">log_stdout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@inject</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">filesystem_identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">file_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
        <span class="n">file_service</span><span class="p">:</span> <span class="n">FileService</span> <span class="o">=</span> <span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">file_service</span><span class="p">],</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save a file.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj (Any): Object to be saved</span>
<span class="sd">            filename (str): File path to save</span>
<span class="sd">            filesystem_identifier (str): String identifier for filesystem configured</span>
<span class="sd">                with File Service</span>
<span class="sd">            file_type (type): Type of file to save as. This is not exposed as a</span>
<span class="sd">                task parameter and should be passed explicitely during task run call.</span>
<span class="sd">                See examples.</span>
<span class="sd">            file_service (FileService): File service for interacting w/ filesystems</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Loaded file type</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">file_type</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">filesystem_identifier</span><span class="o">=</span><span class="n">filesystem_identifier</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span>
        <span class="p">)</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_service</span><span class="o">=</span><span class="n">file_service</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">jsonable_dict</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="lume_services.tasks.file.SaveFile.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>This task is defined as a subclass of the Prefect <a href="https://docs-v1.prefect.io/api/latest/core/task.html#task-2">Task</a>
object and accepts all Task arguments during initialization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of this task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>slug</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The slug for this task. Slugs provide a stable ID
for tasks so that the Prefect API can identify task run states. If a
slug is not provided, one will be generated automatically once the
task is added to a Flow.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tags</code>
            </td>
            <td>
                  <code>Optional[List[str]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tags for this task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_retries</code>
            </td>
            <td>
                  <code>Optional[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum amount of times this task can be
retried</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>retry_delay</code>
            </td>
            <td>
                  <code>Optional[timedelta]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time to wait
until task is retried</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>retry_on</code>
            </td>
            <td>
                  <code>Optional[Union[Exception, Iterable[Type[Exception]]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception
types that will allow retry behavior to occur. If not set, all
exceptions will allow retries. If set, retries will only occur if the
exception is a subtype of the exception types provided.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code>Optional[Union[int, timedelta]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time (in seconds)
to wait while running this task before a timeout occurs; note that
sub-second resolution is not supported, even when passing in a
timedelta.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trigger</code>
            </td>
            <td>
                  <code>Optional[callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a function that determines whether the task
should run, based on the states of any upstream tasks.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skip_on_upstream_skip</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, if any immediately upstream
tasks are skipped, this task will automatically be skipped as well,
regardless of trigger. By default, this prevents tasks from attempting
to use either state or data from tasks that didn't run. If False, the
task's trigger will be called as normal, with skips considered
successes. Defaults to True.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_for</code>
            </td>
            <td>
                  <code>Optional[timedelta]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The amount of time to maintain a cache</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_validator</code>
            </td>
            <td>
                  <code>Optional[Callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Validator that will determine
whether the cache for this task is still valid (only required if
<code>cache_for</code> is provided; defaults to
<code>prefect.engine.cache_validators.duration_only</code>)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_key</code>
            </td>
            <td>
                  <code>Optional[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if provided, a <code>cache_key</code>
serves as a unique identifier for this Task's cache, and can be shared
across both Tasks <em>and</em> Flows; if not provided, the Task's <em>name</em> will
be used if running locally, or the Task's database ID if running in
Cloud</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>checkpoint</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if this Task is successful, whether to
store its result using the configured result available during the run;
Also note that checkpointing will only occur locally if
<code>prefect.config.flows.checkpointing</code> is set to <code>True</code></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>result</code>
            </td>
            <td>
                  <code>Optional[Result]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the result instance used to retrieve and
store task results during execution</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target</code>
            </td>
            <td>
                  <code>Optional[Union[str, Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>location to check for task Result.
If a result exists at that location then the task run will enter a
cached state. <code>target</code> strings can be templated formatting strings
which will be formatted at runtime with values from <code>prefect.context</code>.
If a callable function is provided, it should have signature
<code>callable(**kwargs) -&gt; str</code> and at write time all formatting kwargs
will be passed and a fully formatted location is expected as the return
value. The callable can be used for string formatting logic that
<code>.format(**kwargs)</code> doesn't support.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>state_handlers</code>
            </td>
            <td>
                  <code>Optional[Iterable[Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of state change
handlers that will be called whenever the task changes state,
providing an opportunity to inspect or modify the new state. The
handler will be passed the task instance, the old (prior) state,
and the new
(current) state, with the following signature:
    <code>state_handler(task: Task, old_state: State, new_state: State) -&gt;
    Optional[State]</code>
If multiple functions are passed, then the <code>new_state</code> argument will
be the result of the previous handler.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>on_failure</code>
            </td>
            <td>
                  <code>Optional[Callable]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function with signature
<code>fn(task: Task, state: State) -&gt; None</code> that will be called anytime this
Task enters a failure state</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_stdout</code>
            </td>
            <td>
                  <code>Optional[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Toggle whether or not to send stdout messages
to the Prefect logger. Defaults to <code>False</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_run_name</code>
            </td>
            <td>
                  <code>Optional[Union[str, Callable]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a name to set for this task
at runtime. <code>task_run_name</code> strings can be templated formatting strings
which will be formatted at runtime with values from task arguments,
<code>prefect.context</code>, and flow parameters (in the case of a name conflict
between these, earlier values take precedence). If a callable function
is provided, it should have signature <code>callable(**kwargs) -&gt; str</code> and
at write time all formatting kwargs will be passed and a fully
formatted location is expected as the return value. The callable can
be used for string formatting logic that <code>.format(**kwargs)</code> doesn't
support. <strong>Note</strong>: this only works for tasks running against a
backend API.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nout</code>
            </td>
            <td>
                  <code>Optional[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>for tasks that return multiple results, the number of
outputs to expect. If not provided, will be inferred from the task
return annotation, if possible.  Note that <code>nout=1</code> implies the task
returns a tuple of one value (leave as <code>None</code> for non-tuple return
types).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This task is defined as a subclass of the Prefect [Task](https://docs-v1.prefect.io/api/latest/core/task.html#task-2)</span>
<span class="sd">    object and accepts all Task arguments during initialization.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (Optional[str]): The name of this task.</span>
<span class="sd">        slug (Optional[str]):  The slug for this task. Slugs provide a stable ID</span>
<span class="sd">            for tasks so that the Prefect API can identify task run states. If a</span>
<span class="sd">            slug is not provided, one will be generated automatically once the</span>
<span class="sd">            task is added to a Flow.</span>
<span class="sd">        tags (Optional[List[str]]): A list of tags for this task.</span>
<span class="sd">        max_retries (Optional[int]): The maximum amount of times this task can be</span>
<span class="sd">            retried</span>
<span class="sd">        retry_delay (Optional[datetime.timedelta]): The amount of time to wait</span>
<span class="sd">            until task is retried</span>
<span class="sd">        retry_on (Optional[Union[Exception, Iterable[Type[Exception]]]]): Exception</span>
<span class="sd">            types that will allow retry behavior to occur. If not set, all</span>
<span class="sd">            exceptions will allow retries. If set, retries will only occur if the</span>
<span class="sd">            exception is a subtype of the exception types provided.</span>
<span class="sd">        timeout (Optional[Union[int, timedelta]]): The amount of time (in seconds)</span>
<span class="sd">            to wait while running this task before a timeout occurs; note that</span>
<span class="sd">            sub-second resolution is not supported, even when passing in a</span>
<span class="sd">            timedelta.</span>
<span class="sd">        trigger (Optional[callable]):  a function that determines whether the task</span>
<span class="sd">            should run, based on the states of any upstream tasks.</span>
<span class="sd">        skip_on_upstream_skip (Optional[bool]): if True, if any immediately upstream</span>
<span class="sd">            tasks are skipped, this task will automatically be skipped as well,</span>
<span class="sd">            regardless of trigger. By default, this prevents tasks from attempting</span>
<span class="sd">            to use either state or data from tasks that didn&#39;t run. If False, the</span>
<span class="sd">            task&#39;s trigger will be called as normal, with skips considered</span>
<span class="sd">            successes. Defaults to True.</span>
<span class="sd">        cache_for (Optional[timedelta]): The amount of time to maintain a cache</span>
<span class="sd">        of the outputs of this task.  Useful for situations where the containing</span>
<span class="sd">        Flow will be rerun multiple times, but this task doesn&#39;t need to be.</span>
<span class="sd">        cache_validator (Optional[Callable]): Validator that will determine</span>
<span class="sd">            whether the cache for this task is still valid (only required if</span>
<span class="sd">            `cache_for` is provided; defaults to</span>
<span class="sd">            `prefect.engine.cache_validators.duration_only`)</span>
<span class="sd">        cache_key (Optional[str]): if provided, a `cache_key`</span>
<span class="sd">            serves as a unique identifier for this Task&#39;s cache, and can be shared</span>
<span class="sd">            across both Tasks _and_ Flows; if not provided, the Task&#39;s _name_ will</span>
<span class="sd">            be used if running locally, or the Task&#39;s database ID if running in</span>
<span class="sd">            Cloud</span>
<span class="sd">        checkpoint (Optional[bool]): if this Task is successful, whether to</span>
<span class="sd">            store its result using the configured result available during the run;</span>
<span class="sd">            Also note that checkpointing will only occur locally if</span>
<span class="sd">            `prefect.config.flows.checkpointing` is set to `True`</span>
<span class="sd">        result (Optional[Result]): the result instance used to retrieve and</span>
<span class="sd">            store task results during execution</span>
<span class="sd">        target (Optional[Union[str, Callable]]): location to check for task Result.</span>
<span class="sd">            If a result exists at that location then the task run will enter a</span>
<span class="sd">            cached state. `target` strings can be templated formatting strings</span>
<span class="sd">            which will be formatted at runtime with values from `prefect.context`.</span>
<span class="sd">            If a callable function is provided, it should have signature</span>
<span class="sd">            `callable(**kwargs) -&gt; str` and at write time all formatting kwargs</span>
<span class="sd">            will be passed and a fully formatted location is expected as the return</span>
<span class="sd">            value. The callable can be used for string formatting logic that</span>
<span class="sd">            `.format(**kwargs)` doesn&#39;t support.</span>
<span class="sd">        state_handlers (Optional[Iterable[Callable]]): A list of state change</span>
<span class="sd">            handlers that will be called whenever the task changes state,</span>
<span class="sd">            providing an opportunity to inspect or modify the new state. The</span>
<span class="sd">            handler will be passed the task instance, the old (prior) state,</span>
<span class="sd">            and the new</span>
<span class="sd">            (current) state, with the following signature:</span>
<span class="sd">                `state_handler(task: Task, old_state: State, new_state: State) -&gt;</span>
<span class="sd">                Optional[State]`</span>
<span class="sd">            If multiple functions are passed, then the `new_state` argument will</span>
<span class="sd">            be the result of the previous handler.</span>
<span class="sd">        on_failure (Optional[Callable]): A function with signature</span>
<span class="sd">            `fn(task: Task, state: State) -&gt; None` that will be called anytime this</span>
<span class="sd">            Task enters a failure state</span>
<span class="sd">        log_stdout (Optional[bool]): Toggle whether or not to send stdout messages</span>
<span class="sd">            to the Prefect logger. Defaults to `False`.</span>
<span class="sd">        task_run_name (Optional[Union[str, Callable]]): a name to set for this task</span>
<span class="sd">            at runtime. `task_run_name` strings can be templated formatting strings</span>
<span class="sd">            which will be formatted at runtime with values from task arguments,</span>
<span class="sd">            `prefect.context`, and flow parameters (in the case of a name conflict</span>
<span class="sd">            between these, earlier values take precedence). If a callable function</span>
<span class="sd">            is provided, it should have signature `callable(**kwargs) -&gt; str` and</span>
<span class="sd">            at write time all formatting kwargs will be passed and a fully</span>
<span class="sd">            formatted location is expected as the return value. The callable can</span>
<span class="sd">            be used for string formatting logic that `.format(**kwargs)` doesn&#39;t</span>
<span class="sd">            support. **Note**: this only works for tasks running against a</span>
<span class="sd">            backend API.</span>
<span class="sd">        nout (Optional[int]): for tasks that return multiple results, the number of</span>
<span class="sd">            outputs to expect. If not provided, will be inferred from the task</span>
<span class="sd">            return annotation, if possible.  Note that `nout=1` implies the task</span>
<span class="sd">            returns a tuple of one value (leave as `None` for non-tuple return</span>
<span class="sd">            types).</span>

<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

    <span class="c1"># apply some defaults but allow overrides</span>
    <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">):</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">log_stdout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_stdout&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;save_file&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">PrefectResult</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">_unique_file_location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="n">log_stdout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="lume_services.tasks.file.SaveFile.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">filesystem_identifier</span><span class="p">,</span> <span class="n">file_type</span><span class="p">,</span> <span class="n">file_service</span><span class="o">=</span><span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">file_service</span><span class="p">])</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Save a file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj</code>
            </td>
            <td>
                  <code>Any</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Object to be saved</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File path to save</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filesystem_identifier</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String identifier for filesystem configured
with File Service</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_type</code>
            </td>
            <td>
                  <code>type</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of file to save as. This is not exposed as a
task parameter and should be passed explicitely during task run call.
See examples.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_service</code>
            </td>
            <td>
                  <code>FileService</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File service for interacting w/ filesystems</p>
              </div>
            </td>
            <td>
                  <code>Provide[file_service]</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Loaded file type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>lume_services/tasks/file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@inject</span>
<span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">filesystem_identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">file_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
    <span class="n">file_service</span><span class="p">:</span> <span class="n">FileService</span> <span class="o">=</span> <span class="n">Provide</span><span class="p">[</span><span class="n">Context</span><span class="o">.</span><span class="n">file_service</span><span class="p">],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj (Any): Object to be saved</span>
<span class="sd">        filename (str): File path to save</span>
<span class="sd">        filesystem_identifier (str): String identifier for filesystem configured</span>
<span class="sd">            with File Service</span>
<span class="sd">        file_type (type): Type of file to save as. This is not exposed as a</span>
<span class="sd">            task parameter and should be passed explicitely during task run call.</span>
<span class="sd">            See examples.</span>
<span class="sd">        file_service (FileService): File service for interacting w/ filesystems</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Loaded file type</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">file_type</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">filesystem_identifier</span><span class="o">=</span><span class="n">filesystem_identifier</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span>
    <span class="p">)</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_service</span><span class="o">=</span><span class="n">file_service</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">jsonable_dict</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["toc.integrate", "toc.follow", "navigation.top", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>